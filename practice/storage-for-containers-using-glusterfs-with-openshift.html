
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>在 OpenShift 中使用 GlusterFS 做持久化存储 · rootsongjc-kubernetes-handbook </title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-solarizedlight.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="glusterd-2.0.html" />
    
    
    <link rel="prev" href="using-heketi-gluster-for-persistent-storage.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://docs.khs1994.com" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        <li class="header">前言</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    序言
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">云原生</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../cloud-native/cloud-native-definition.html">
            
                <a href="../cloud-native/cloud-native-definition.html">
            
                    
                    云原生（Cloud Native）的定义
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../cloud-native/cloud-native-philosophy.html">
            
                <a href="../cloud-native/cloud-native-philosophy.html">
            
                    
                    云原生的设计哲学
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../cloud-native/kubernetes-history.html">
            
                <a href="../cloud-native/kubernetes-history.html">
            
                    
                    Kubernetes 的诞生
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../cloud-native/kubernetes-and-cloud-native-app-overview.html">
            
                <a href="../cloud-native/kubernetes-and-cloud-native-app-overview.html">
            
                    
                    Kubernetes 与云原生应用概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../cloud-native/from-kubernetes-to-cloud-native.html">
            
                <a href="../cloud-native/from-kubernetes-to-cloud-native.html">
            
                    
                    云原生应用之路 —— 从 Kubernetes 到 Cloud Native
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../cloud-native/define-cloud-native-app.html">
            
                <a href="../cloud-native/define-cloud-native-app.html">
            
                    
                    定义云原生应用
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.6.1" data-path="../cloud-native/oam.html">
            
                <a href="../cloud-native/oam.html">
            
                    
                    OAM
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.6.1.1" data-path="../cloud-native/workload.html">
            
                <a href="../cloud-native/workload.html">
            
                    
                    Workload
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.1.2" data-path="../cloud-native/component.html">
            
                <a href="../cloud-native/component.html">
            
                    
                    Component
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.1.3" data-path="../cloud-native/trait.html">
            
                <a href="../cloud-native/trait.html">
            
                    
                    Trait
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.1.4" data-path="../cloud-native/application-scope.html">
            
                <a href="../cloud-native/application-scope.html">
            
                    
                    Application Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.1.5" data-path="../cloud-native/application-configuration.html">
            
                <a href="../cloud-native/application-configuration.html">
            
                    
                    Application Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.6.2" data-path="../cloud-native/crossplane.html">
            
                <a href="../cloud-native/crossplane.html">
            
                    
                    Crossplane
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="../cloud-native/cloud-native-programming-languages.html">
            
                <a href="../cloud-native/cloud-native-programming-languages.html">
            
                    
                    云原生编程语言
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.7.1" data-path="../cloud-native/cloud-native-programming-language-ballerina.html">
            
                <a href="../cloud-native/cloud-native-programming-language-ballerina.html">
            
                    
                    云原生编程语言 Ballerina
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.2" data-path="../cloud-native/cloud-native-programming-language-pulumi.html">
            
                <a href="../cloud-native/cloud-native-programming-language-pulumi.html">
            
                    
                    云原生编程语言 Pulumi
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="../cloud-native/the-future-of-cloud-native.html">
            
                <a href="../cloud-native/the-future-of-cloud-native.html">
            
                    
                    云原生的未来
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">快速入门</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../cloud-native/quick-start.html">
            
                <a href="../cloud-native/quick-start.html">
            
                    
                    云原生新手入门指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../cloud-native/play-with-kubernetes.html">
            
                <a href="../cloud-native/play-with-kubernetes.html">
            
                    
                    Play with Kubernetes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../cloud-native/cloud-native-local-quick-start.html">
            
                <a href="../cloud-native/cloud-native-local-quick-start.html">
            
                    
                    快速部署一个云原生本地实验环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../cloud-native/setup-kubernetes-with-rancher-and-aliyun.html">
            
                <a href="../cloud-native/setup-kubernetes-with-rancher-and-aliyun.html">
            
                    
                    使用 Rancher 在阿里云上部署 Kubenretes 集群
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">概念与原理</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../concepts/">
            
                <a href="../concepts/">
            
                    
                    Kubernetes 架构
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../concepts/concepts.html">
            
                <a href="../concepts/concepts.html">
            
                    
                    设计理念
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../concepts/etcd.html">
            
                <a href="../concepts/etcd.html">
            
                    
                    Etcd 解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../concepts/open-interfaces.html">
            
                <a href="../concepts/open-interfaces.html">
            
                    
                    开放接口
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.3.1" data-path="../concepts/cri.html">
            
                <a href="../concepts/cri.html">
            
                    
                    CRI - Container Runtime Interface（容器运行时接口）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3.2" data-path="../concepts/cni.html">
            
                <a href="../concepts/cni.html">
            
                    
                    CNI - Container Network Interface（容器网络接口）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3.3" data-path="../concepts/csi.html">
            
                <a href="../concepts/csi.html">
            
                    
                    CSI - Container Storage Interface（容器存储接口）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../concepts/networking.html">
            
                <a href="../concepts/networking.html">
            
                    
                    Kubernetes 中的网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.1" data-path="../concepts/flannel.html">
            
                <a href="../concepts/flannel.html">
            
                    
                    Kubernetes 中的网络解析 —— 以 flannel 为例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.2" data-path="../concepts/calico.html">
            
                <a href="../concepts/calico.html">
            
                    
                    Kubernetes 中的网络解析 —— 以 calico 为例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.3" data-path="../concepts/cilium.html">
            
                <a href="../concepts/cilium.html">
            
                    
                    具备 API 感知的网络和安全性管理开源软件 Cilium
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.3.1" data-path="../concepts/cilium-concepts.html">
            
                <a href="../concepts/cilium-concepts.html">
            
                    
                    Cilium 架构设计与概念解析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../concepts/objects.html">
            
                <a href="../concepts/objects.html">
            
                    
                    资源对象与基本概念解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../concepts/pod-state-and-lifecycle.html">
            
                <a href="../concepts/pod-state-and-lifecycle.html">
            
                    
                    Pod 状态与生命周期管理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.4.1" data-path="../concepts/pod-overview.html">
            
                <a href="../concepts/pod-overview.html">
            
                    
                    Pod 概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.2" data-path="../concepts/pod.html">
            
                <a href="../concepts/pod.html">
            
                    
                    Pod 解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.3" data-path="../concepts/init-containers.html">
            
                <a href="../concepts/init-containers.html">
            
                    
                    Init 容器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.4" data-path="../concepts/pause-container.html">
            
                <a href="../concepts/pause-container.html">
            
                    
                    Pause 容器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.5" data-path="../concepts/pod-security-policy.html">
            
                <a href="../concepts/pod-security-policy.html">
            
                    
                    Pod 安全策略
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.6" data-path="../concepts/pod-lifecycle.html">
            
                <a href="../concepts/pod-lifecycle.html">
            
                    
                    Pod 的生命周期
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.7" data-path="../concepts/pod-hook.html">
            
                <a href="../concepts/pod-hook.html">
            
                    
                    Pod Hook
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.8" data-path="../concepts/pod-preset.html">
            
                <a href="../concepts/pod-preset.html">
            
                    
                    Pod Preset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.9" data-path="../concepts/pod-disruption-budget.html">
            
                <a href="../concepts/pod-disruption-budget.html">
            
                    
                    Pod 中断与 PDB（Pod 中断预算）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../concepts/cluster.html">
            
                <a href="../concepts/cluster.html">
            
                    
                    集群资源管理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.5.1" data-path="../concepts/node.html">
            
                <a href="../concepts/node.html">
            
                    
                    Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5.2" data-path="../concepts/namespace.html">
            
                <a href="../concepts/namespace.html">
            
                    
                    Namespace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5.3" data-path="../concepts/label.html">
            
                <a href="../concepts/label.html">
            
                    
                    Label
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5.4" data-path="../concepts/annotation.html">
            
                <a href="../concepts/annotation.html">
            
                    
                    Annotation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5.5" data-path="../concepts/taint-and-toleration.html">
            
                <a href="../concepts/taint-and-toleration.html">
            
                    
                    Taint 和 Toleration（污点和容忍）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5.6" data-path="../concepts/garbage-collection.html">
            
                <a href="../concepts/garbage-collection.html">
            
                    
                    垃圾收集
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="../concepts/controllers.html">
            
                <a href="../concepts/controllers.html">
            
                    
                    控制器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.6.1" data-path="../concepts/deployment.html">
            
                <a href="../concepts/deployment.html">
            
                    
                    Deployment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6.2" data-path="../concepts/statefulset.html">
            
                <a href="../concepts/statefulset.html">
            
                    
                    StatefulSet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6.3" data-path="../concepts/daemonset.html">
            
                <a href="../concepts/daemonset.html">
            
                    
                    DaemonSet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6.4" data-path="../concepts/replicaset.html">
            
                <a href="../concepts/replicaset.html">
            
                    
                    ReplicationController 和 ReplicaSet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6.5" data-path="../concepts/job.html">
            
                <a href="../concepts/job.html">
            
                    
                    Job
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6.6" data-path="../concepts/cronjob.html">
            
                <a href="../concepts/cronjob.html">
            
                    
                    CronJob
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6.7" data-path="../concepts/horizontal-pod-autoscaling.html">
            
                <a href="../concepts/horizontal-pod-autoscaling.html">
            
                    
                    Horizontal Pod Autoscaling
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.6.7.1" data-path="../concepts/custom-metrics-hpa.html">
            
                <a href="../concepts/custom-metrics-hpa.html">
            
                    
                    自定义指标 HPA
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.6.8" data-path="../concepts/admission-controller.html">
            
                <a href="../concepts/admission-controller.html">
            
                    
                    准入控制器（Admission Controller）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="../concepts/service-discovery.html">
            
                <a href="../concepts/service-discovery.html">
            
                    
                    服务发现
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.7.1" data-path="../concepts/service.html">
            
                <a href="../concepts/service.html">
            
                    
                    Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.7.2" data-path="../concepts/ingress.html">
            
                <a href="../concepts/ingress.html">
            
                    
                    Ingress
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.7.2.1" data-path="../concepts/traefik-ingress-controller.html">
            
                <a href="../concepts/traefik-ingress-controller.html">
            
                    
                    Traefik Ingress Controller
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.7.3" data-path="../concepts/kubernetes-service-api.html">
            
                <a href="../concepts/kubernetes-service-api.html">
            
                    
                    Kubernetes Service API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.7.3.1" data-path="../concepts/service-api-overview.html">
            
                <a href="../concepts/service-api-overview.html">
            
                    
                    Service API 简介
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="../concepts/authentication-and-permission.html">
            
                <a href="../concepts/authentication-and-permission.html">
            
                    
                    身份与权限控制
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.8.1" data-path="../concepts/serviceaccount.html">
            
                <a href="../concepts/serviceaccount.html">
            
                    
                    ServiceAccount
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.8.2" data-path="../concepts/rbac.html">
            
                <a href="../concepts/rbac.html">
            
                    
                    RBAC—— 基于角色的访问控制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.8.3" data-path="../concepts/network-policy.html">
            
                <a href="../concepts/network-policy.html">
            
                    
                    NetworkPolicy
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="../concepts/storage.html">
            
                <a href="../concepts/storage.html">
            
                    
                    存储
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.9.1" data-path="../concepts/secret.html">
            
                <a href="../concepts/secret.html">
            
                    
                    Secret
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.9.2" data-path="../concepts/configmap.html">
            
                <a href="../concepts/configmap.html">
            
                    
                    ConfigMap
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.9.2.1" data-path="../concepts/configmap-hot-update.html">
            
                <a href="../concepts/configmap-hot-update.html">
            
                    
                    ConfigMap 的热更新
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.9.3" data-path="../concepts/volume.html">
            
                <a href="../concepts/volume.html">
            
                    
                    Volume
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.9.4" data-path="../concepts/persistent-volume.html">
            
                <a href="../concepts/persistent-volume.html">
            
                    
                    Persistent Volume（持久化卷）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.9.5" data-path="../concepts/storageclass.html">
            
                <a href="../concepts/storageclass.html">
            
                    
                    Storage Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.9.6" data-path="../concepts/local-persistent-storage.html">
            
                <a href="../concepts/local-persistent-storage.html">
            
                    
                    本地持久化存储
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.10" data-path="../concepts/extension.html">
            
                <a href="../concepts/extension.html">
            
                    
                    集群扩展
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.10.1" data-path="../concepts/custom-resource.html">
            
                <a href="../concepts/custom-resource.html">
            
                    
                    使用自定义资源扩展 API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.10.2" data-path="../concepts/crd.html">
            
                <a href="../concepts/crd.html">
            
                    
                    使用 CRD 扩展 Kubernetes API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.10.3" data-path="../concepts/aggregated-api-server.html">
            
                <a href="../concepts/aggregated-api-server.html">
            
                    
                    Aggregated API Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.10.4" data-path="../concepts/apiservice.html">
            
                <a href="../concepts/apiservice.html">
            
                    
                    APIService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.10.5" data-path="../concepts/service-catalog.html">
            
                <a href="../concepts/service-catalog.html">
            
                    
                    Service Catalog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.10.6" data-path="../concepts/multicluster.html">
            
                <a href="../concepts/multicluster.html">
            
                    
                    多集群管理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.11" data-path="../concepts/scheduling.html">
            
                <a href="../concepts/scheduling.html">
            
                    
                    资源调度
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.11.1" data-path="../concepts/qos.html">
            
                <a href="../concepts/qos.html">
            
                    
                    QoS（服务质量等级）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">用户指南</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../guide/">
            
                <a href="../guide/">
            
                    
                    用户指南概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../guide/resource-configuration.html">
            
                <a href="../guide/resource-configuration.html">
            
                    
                    资源对象配置
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.1" data-path="../guide/configure-liveness-readiness-probes.html">
            
                <a href="../guide/configure-liveness-readiness-probes.html">
            
                    
                    配置 Pod 的 liveness 和 readiness 探针
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2.2" data-path="../guide/configure-pod-service-account.html">
            
                <a href="../guide/configure-pod-service-account.html">
            
                    
                    配置 Pod 的 Service Account
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2.3" data-path="../guide/secret-configuration.html">
            
                <a href="../guide/secret-configuration.html">
            
                    
                    Secret 配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2.4" data-path="../guide/resource-quota-management.html">
            
                <a href="../guide/resource-quota-management.html">
            
                    
                    管理 namespace 中的资源配额
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../guide/command-usage.html">
            
                <a href="../guide/command-usage.html">
            
                    
                    命令使用
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.3.1" data-path="../guide/docker-cli-to-kubectl.html">
            
                <a href="../guide/docker-cli-to-kubectl.html">
            
                    
                    Docker 用户过渡到 kubectl 命令行指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.2" data-path="../guide/using-kubectl.html">
            
                <a href="../guide/using-kubectl.html">
            
                    
                    kubectl 命令概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.3" data-path="../guide/kubectl-cheatsheet.html">
            
                <a href="../guide/kubectl-cheatsheet.html">
            
                    
                    kubectl 命令技巧大全
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.4" data-path="../guide/using-etcdctl-to-access-kubernetes-data.html">
            
                <a href="../guide/using-etcdctl-to-access-kubernetes-data.html">
            
                    
                    使用 etcdctl 访问 kubernetes 数据
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="../guide/cluster-security-management.html">
            
                <a href="../guide/cluster-security-management.html">
            
                    
                    集群安全性管理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.4.1" data-path="../guide/managing-tls-in-a-cluster.html">
            
                <a href="../guide/managing-tls-in-a-cluster.html">
            
                    
                    管理集群中的 TLS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.2" data-path="../guide/kubelet-authentication-authorization.html">
            
                <a href="../guide/kubelet-authentication-authorization.html">
            
                    
                    kubelet 的认证授权
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.3" data-path="../guide/tls-bootstrapping.html">
            
                <a href="../guide/tls-bootstrapping.html">
            
                    
                    TLS Bootstrap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.4" data-path="../guide/kubectl-user-authentication-authorization.html">
            
                <a href="../guide/kubectl-user-authentication-authorization.html">
            
                    
                    创建用户认证授权的 kubeconfig 文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.5" data-path="../guide/ip-masq-agent.html">
            
                <a href="../guide/ip-masq-agent.html">
            
                    
                    IP 伪装代理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.6" data-path="../guide/auth-with-kubeconfig-or-token.html">
            
                <a href="../guide/auth-with-kubeconfig-or-token.html">
            
                    
                    使用 kubeconfig 或 token 进行用户身份认证
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.7" data-path="../guide/authentication.html">
            
                <a href="../guide/authentication.html">
            
                    
                    Kubernetes 中的用户与身份认证授权
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.8" data-path="../guide/kubernetes-security-best-practice.html">
            
                <a href="../guide/kubernetes-security-best-practice.html">
            
                    
                    Kubernetes 集群安全性配置最佳实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="../guide/access-kubernetes-cluster.html">
            
                <a href="../guide/access-kubernetes-cluster.html">
            
                    
                    访问 Kubernetes 集群
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.5.1" data-path="../guide/access-cluster.html">
            
                <a href="../guide/access-cluster.html">
            
                    
                    访问集群
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.2" data-path="../guide/authenticate-across-clusters-kubeconfig.html">
            
                <a href="../guide/authenticate-across-clusters-kubeconfig.html">
            
                    
                    使用 kubeconfig 文件配置跨集群认证
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.3" data-path="../guide/connecting-to-applications-port-forward.html">
            
                <a href="../guide/connecting-to-applications-port-forward.html">
            
                    
                    通过端口转发访问集群中的应用程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.4" data-path="../guide/service-access-application-cluster.html">
            
                <a href="../guide/service-access-application-cluster.html">
            
                    
                    使用 service 访问群集中的应用程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.5" data-path="../guide/accessing-kubernetes-pods-from-outside-of-the-cluster.html">
            
                <a href="../guide/accessing-kubernetes-pods-from-outside-of-the-cluster.html">
            
                    
                    从外部访问 Kubernetes 中的 Pod
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.6" data-path="../guide/cabin-mobile-dashboard-for-kubernetes.html">
            
                <a href="../guide/cabin-mobile-dashboard-for-kubernetes.html">
            
                    
                    Cabin - Kubernetes 手机客户端
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.7" data-path="../guide/kubernetes-desktop-client.html">
            
                <a href="../guide/kubernetes-desktop-client.html">
            
                    
                    Lens - Kubernetes IDE/桌面客户端
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.8" data-path="../guide/kubernator-kubernetes-ui.html">
            
                <a href="../guide/kubernator-kubernetes-ui.html">
            
                    
                    Kubernator - 更底层的 Kubernetes UI
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="../guide/application-development-deployment-flow.html">
            
                <a href="../guide/application-development-deployment-flow.html">
            
                    
                    在 Kubernetes 中开发部署应用
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.6.1" data-path="../guide/deploy-applications-in-kubernetes.html">
            
                <a href="../guide/deploy-applications-in-kubernetes.html">
            
                    
                    适用于 kubernetes 的应用开发部署流程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6.2" data-path="../guide/migrating-hadoop-yarn-to-kubernetes.html">
            
                <a href="../guide/migrating-hadoop-yarn-to-kubernetes.html">
            
                    
                    迁移传统应用到 Kubernetes 中 —— 以 Hadoop YARN 为例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6.3" data-path="../guide/using-statefulset.html">
            
                <a href="../guide/using-statefulset.html">
            
                    
                    使用 StatefulSet 部署用状态应用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">最佳实践</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="./">
            
                <a href="./">
            
                    
                    最佳实践概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="install-kubernetes-on-centos.html">
            
                <a href="install-kubernetes-on-centos.html">
            
                    
                    在 CentOS 上部署 Kubernetes 集群
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.2.1" data-path="create-tls-and-secret-key.html">
            
                <a href="create-tls-and-secret-key.html">
            
                    
                    创建 TLS 证书和秘钥
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.2" data-path="create-kubeconfig.html">
            
                <a href="create-kubeconfig.html">
            
                    
                    创建 kubeconfig 文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.3" data-path="etcd-cluster-installation.html">
            
                <a href="etcd-cluster-installation.html">
            
                    
                    创建高可用 etcd 集群
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.4" data-path="kubectl-installation.html">
            
                <a href="kubectl-installation.html">
            
                    
                    安装 kubectl 命令行工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.5" data-path="master-installation.html">
            
                <a href="master-installation.html">
            
                    
                    部署 master 节点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.6" data-path="flannel-installation.html">
            
                <a href="flannel-installation.html">
            
                    
                    安装 flannel 网络插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.7" data-path="node-installation.html">
            
                <a href="node-installation.html">
            
                    
                    部署 node 节点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.8" data-path="kubedns-addon-installation.html">
            
                <a href="kubedns-addon-installation.html">
            
                    
                    安装 kubedns 插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.9" data-path="dashboard-addon-installation.html">
            
                <a href="dashboard-addon-installation.html">
            
                    
                    安装 dashboard 插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.10" data-path="heapster-addon-installation.html">
            
                <a href="heapster-addon-installation.html">
            
                    
                    安装 heapster 插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.11" data-path="efk-addon-installation.html">
            
                <a href="efk-addon-installation.html">
            
                    
                    安装 EFK 插件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="install-kubernetes-with-kubeadm.html">
            
                <a href="install-kubernetes-with-kubeadm.html">
            
                    
                    生产级的 Kubernetes 简化管理工具 kubeadm
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.3.1" data-path="install-kubernetes-on-ubuntu-server-16.04-with-kubeadm.html">
            
                <a href="install-kubernetes-on-ubuntu-server-16.04-with-kubeadm.html">
            
                    
                    使用 kubeadm 在 Ubuntu Server 16.04 上快速构建测试集群
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="service-discovery-and-loadbalancing.html">
            
                <a href="service-discovery-and-loadbalancing.html">
            
                    
                    服务发现与负载均衡
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.4.1" data-path="traefik-ingress-installation.html">
            
                <a href="traefik-ingress-installation.html">
            
                    
                    安装 Traefik ingress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4.2" data-path="distributed-load-test.html">
            
                <a href="distributed-load-test.html">
            
                    
                    分布式负载测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4.3" data-path="network-and-cluster-perfermance-test.html">
            
                <a href="network-and-cluster-perfermance-test.html">
            
                    
                    网络和集群性能测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4.4" data-path="edge-node-configuration.html">
            
                <a href="edge-node-configuration.html">
            
                    
                    边缘节点配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4.5" data-path="nginx-ingress-installation.html">
            
                <a href="nginx-ingress-installation.html">
            
                    
                    安装 Nginx ingress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4.6" data-path="dns-installation.html">
            
                <a href="dns-installation.html">
            
                    
                    安装配置 DNS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.4.6.1" data-path="configuring-dns.html">
            
                <a href="configuring-dns.html">
            
                    
                    安装配置 Kube-dns
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4.6.2" data-path="coredns.html">
            
                <a href="coredns.html">
            
                    
                    安装配置 CoreDNS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="operation.html">
            
                <a href="operation.html">
            
                    
                    运维管理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.5.1" data-path="master-ha.html">
            
                <a href="master-ha.html">
            
                    
                    Master 节点高可用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5.2" data-path="service-rolling-update.html">
            
                <a href="service-rolling-update.html">
            
                    
                    服务滚动升级
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5.3" data-path="app-log-collection.html">
            
                <a href="app-log-collection.html">
            
                    
                    应用日志收集
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5.4" data-path="configuration-best-practice.html">
            
                <a href="configuration-best-practice.html">
            
                    
                    配置最佳实践
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5.5" data-path="monitor.html">
            
                <a href="monitor.html">
            
                    
                    集群及应用监控
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5.6" data-path="data-persistence-problem.html">
            
                <a href="data-persistence-problem.html">
            
                    
                    数据持久化问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5.7" data-path="manage-compute-resources-container.html">
            
                <a href="manage-compute-resources-container.html">
            
                    
                    管理容器的计算资源
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5.8" data-path="federation.html">
            
                <a href="federation.html">
            
                    
                    集群联邦（Cluster Federation）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="storage.html">
            
                <a href="storage.html">
            
                    
                    存储管理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.6.1" data-path="glusterfs.html">
            
                <a href="glusterfs.html">
            
                    
                    GlusterFS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.6.1.1" data-path="using-glusterfs-for-persistent-storage.html">
            
                <a href="using-glusterfs-for-persistent-storage.html">
            
                    
                    使用 GlusterFS 做持久化存储
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.6.1.2" data-path="using-heketi-gluster-for-persistent-storage.html">
            
                <a href="using-heketi-gluster-for-persistent-storage.html">
            
                    
                    使用 Heketi 作为 Kubernetes 的持久存储 GlusterFS 的 external provisioner
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="6.6.1.3" data-path="storage-for-containers-using-glusterfs-with-openshift.html">
            
                <a href="storage-for-containers-using-glusterfs-with-openshift.html">
            
                    
                    在 OpenShift 中使用 GlusterFS 做持久化存储
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.6.2" data-path="glusterd-2.0.html">
            
                <a href="glusterd-2.0.html">
            
                    
                    GlusterD-2.0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.6.3" data-path="ceph.html">
            
                <a href="ceph.html">
            
                    
                    Ceph
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.6.3.1" data-path="ceph-helm-install-guide-zh.html">
            
                <a href="ceph-helm-install-guide-zh.html">
            
                    
                    用 Helm 托管安装 Ceph 集群并提供后端存储
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.6.3.2" data-path="using-ceph-for-persistent-storage.html">
            
                <a href="using-ceph-for-persistent-storage.html">
            
                    
                    使用 Ceph 做持久化存储
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.6.3.3" data-path="rbd-provisioner.html">
            
                <a href="rbd-provisioner.html">
            
                    
                    使用 rbd-provisioner 提供 rbd 持久化存储
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.6.4" data-path="openebs.html">
            
                <a href="openebs.html">
            
                    
                    OpenEBS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.6.4.1" data-path="using-openebs-for-persistent-storage.html">
            
                <a href="using-openebs-for-persistent-storage.html">
            
                    
                    使用 OpenEBS 做持久化存储
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.6.5" data-path="rook.html">
            
                <a href="rook.html">
            
                    
                    Rook
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.6.6" data-path="nfs.html">
            
                <a href="nfs.html">
            
                    
                    NFS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.6.6.1" data-path="using-nfs-for-persistent-storage.html">
            
                <a href="using-nfs-for-persistent-storage.html">
            
                    
                    利用 NFS 动态提供 Kubernetes 后端存储卷
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="monitoring.html">
            
                <a href="monitoring.html">
            
                    
                    集群与应用监控
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.7.1" data-path="heapster.html">
            
                <a href="heapster.html">
            
                    
                    Heapster
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.7.1.1" data-path="using-heapster-to-get-object-metrics.html">
            
                <a href="using-heapster-to-get-object-metrics.html">
            
                    
                    使用 Heapster 获取集群和对象的 metric 数据
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.7.2" data-path="prometheus.html">
            
                <a href="prometheus.html">
            
                    
                    Prometheus
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.7.2.1" data-path="using-prometheus-to-monitor-kuberentes-cluster.html">
            
                <a href="using-prometheus-to-monitor-kuberentes-cluster.html">
            
                    
                    使用 Prometheus 监控 kubernetes 集群
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.7.2.2" data-path="promql.html">
            
                <a href="promql.html">
            
                    
                    Prometheus 查询语言 PromQL 使用说明
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.7.3" data-path="vistio-visualize-your-istio-mesh.html">
            
                <a href="vistio-visualize-your-istio-mesh.html">
            
                    
                    使用 Vistio 监控 Istio 服务网格中的流量
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="distributed-tracing.html">
            
                <a href="distributed-tracing.html">
            
                    
                    分布式追踪
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.8.1" data-path="opentracing.html">
            
                <a href="opentracing.html">
            
                    
                    OpenTracing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.9" data-path="services-management-tool.html">
            
                <a href="services-management-tool.html">
            
                    
                    服务编排管理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.9.1" data-path="helm.html">
            
                <a href="helm.html">
            
                    
                    使用 Helm 管理 Kubernetes 应用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.9.2" data-path="create-private-charts-repo.html">
            
                <a href="create-private-charts-repo.html">
            
                    
                    构建私有 Chart 仓库
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.10" data-path="ci-cd.html">
            
                <a href="ci-cd.html">
            
                    
                    持续集成与发布
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.10.1" data-path="jenkins-ci-cd.html">
            
                <a href="jenkins-ci-cd.html">
            
                    
                    使用 Jenkins 进行持续集成与发布
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.10.2" data-path="drone-ci-cd.html">
            
                <a href="drone-ci-cd.html">
            
                    
                    使用 Drone 进行持续集成与发布
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.11" data-path="update-and-upgrade.html">
            
                <a href="update-and-upgrade.html">
            
                    
                    更新与升级
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.11.1" data-path="manually-upgrade.html">
            
                <a href="manually-upgrade.html">
            
                    
                    手动升级 Kubernetes 集群
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.11.2" data-path="dashboard-upgrade.html">
            
                <a href="dashboard-upgrade.html">
            
                    
                    升级 dashboard
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.12" data-path="controller-extended.html">
            
                <a href="controller-extended.html">
            
                    
                    扩展控制器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.12.1" data-path="openkruise.html">
            
                <a href="openkruise.html">
            
                    
                    OpenKruise
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.12.1.1" data-path="in-place-update.html">
            
                <a href="in-place-update.html">
            
                    
                    原地升级
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">服务网格</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../usecases/service-mesh.html">
            
                <a href="../usecases/service-mesh.html">
            
                    
                    服务网格（Service Mesh）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../usecases/the-enterprise-path-to-service-mesh-architectures.html">
            
                <a href="../usecases/the-enterprise-path-to-service-mesh-architectures.html">
            
                    
                    企业级服务网格架构
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.2.1" data-path="../usecases/service-mesh-fundamental.html">
            
                <a href="../usecases/service-mesh-fundamental.html">
            
                    
                    服务网格基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2.2" data-path="../usecases/comparing-service-mesh-technologies.html">
            
                <a href="../usecases/comparing-service-mesh-technologies.html">
            
                    
                    服务网格技术对比
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2.3" data-path="../usecases/service-mesh-vs-api-gateway.html">
            
                <a href="../usecases/service-mesh-vs-api-gateway.html">
            
                    
                    服务网格对比 API 网关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2.4" data-path="../usecases/service-mesh-adoption-and-evolution.html">
            
                <a href="../usecases/service-mesh-adoption-and-evolution.html">
            
                    
                    采纳和演进
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2.5" data-path="../usecases/service-mesh-customization-and-integration.html">
            
                <a href="../usecases/service-mesh-customization-and-integration.html">
            
                    
                    定制和集成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2.6" data-path="../usecases/service-mesh-conclusion.html">
            
                <a href="../usecases/service-mesh-conclusion.html">
            
                    
                    总结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../usecases/istio.html">
            
                <a href="../usecases/istio.html">
            
                    
                    Istio
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.3.1" data-path="../usecases/before-using-istio.html">
            
                <a href="../usecases/before-using-istio.html">
            
                    
                    使用 Istio 前需要考虑的问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3.2" data-path="../usecases/istio-installation.html">
            
                <a href="../usecases/istio-installation.html">
            
                    
                    安装并试用 Istio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3.3" data-path="../usecases/sidecar-spec-in-istio.html">
            
                <a href="../usecases/sidecar-spec-in-istio.html">
            
                    
                    Istio 中 sidecar 的注入规范及示例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3.4" data-path="../usecases/istio-community-tips.html">
            
                <a href="../usecases/istio-community-tips.html">
            
                    
                    如何参与 Istio 社区及注意事项
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3.5" data-path="../usecases/istio-tutorials-collection.html">
            
                <a href="../usecases/istio-tutorials-collection.html">
            
                    
                    Istio 免费学习资源汇总
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3.6" data-path="../usecases/understand-sidecar-injection-and-traffic-hijack-in-istio-service-mesh.html">
            
                <a href="../usecases/understand-sidecar-injection-and-traffic-hijack-in-istio-service-mesh.html">
            
                    
                    Sidecar 的注入与流量劫持
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3.7" data-path="../usecases/envoy-sidecar-routing-of-istio-service-mesh-deep-dive.html">
            
                <a href="../usecases/envoy-sidecar-routing-of-istio-service-mesh-deep-dive.html">
            
                    
                    Envoy Sidecar 代理的路由转发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3.8" data-path="../usecases/how-to-integrate-istio-with-vm.html">
            
                <a href="../usecases/how-to-integrate-istio-with-vm.html">
            
                    
                    Istio 如何支持虚拟机
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3.9" data-path="../usecases/istio-vm-support.html">
            
                <a href="../usecases/istio-vm-support.html">
            
                    
                    Istio 支持虚拟机的历史
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="../usecases/envoy.html">
            
                <a href="../usecases/envoy.html">
            
                    
                    Envoy
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.4.1" data-path="../usecases/envoy-terminology.html">
            
                <a href="../usecases/envoy-terminology.html">
            
                    
                    Envoy 的架构与基本术语
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.4.2" data-path="../usecases/envoy-front-proxy.html">
            
                <a href="../usecases/envoy-front-proxy.html">
            
                    
                    Envoy 作为前端代理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.4.3" data-path="../usecases/envoy-mesh-in-kubernetes-tutorial.html">
            
                <a href="../usecases/envoy-mesh-in-kubernetes-tutorial.html">
            
                    
                    Envoy mesh 教程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">领域应用</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../usecases/">
            
                <a href="../usecases/">
            
                    
                    领域应用概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="../usecases/microservices.html">
            
                <a href="../usecases/microservices.html">
            
                    
                    微服务架构
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.2.1" data-path="../usecases/service-discovery-in-microservices.html">
            
                <a href="../usecases/service-discovery-in-microservices.html">
            
                    
                    微服务中的服务发现
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2.2" data-path="../usecases/microservices-for-java-developers.html">
            
                <a href="../usecases/microservices-for-java-developers.html">
            
                    
                    使用 Java 构建微服务并发布到 Kubernetes 平台
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.2.2.1" data-path="../usecases/spring-boot-quick-start-guide.html">
            
                <a href="../usecases/spring-boot-quick-start-guide.html">
            
                    
                    Spring Boot 快速开始指南
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="../usecases/big-data.html">
            
                <a href="../usecases/big-data.html">
            
                    
                    大数据
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.3.1" data-path="../usecases/spark-standalone-on-kubernetes.html">
            
                <a href="../usecases/spark-standalone-on-kubernetes.html">
            
                    
                    Spark standalone on Kubernetes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.3.2" data-path="../usecases/running-spark-with-kubernetes-native-scheduler.html">
            
                <a href="../usecases/running-spark-with-kubernetes-native-scheduler.html">
            
                    
                    运行支持 Kubernetes 原生调度的 Spark 程序
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="../usecases/serverless.html">
            
                <a href="../usecases/serverless.html">
            
                    
                    Serverless 架构
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.4.1" data-path="../usecases/understanding-serverless.html">
            
                <a href="../usecases/understanding-serverless.html">
            
                    
                    理解 Serverless
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.4.2" data-path="../usecases/faas.html">
            
                <a href="../usecases/faas.html">
            
                    
                    FaaS（函数即服务）
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.4.2.1" data-path="../usecases/openfaas-quick-start.html">
            
                <a href="../usecases/openfaas-quick-start.html">
            
                    
                    OpenFaaS 快速入门指南
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.4.3" data-path="../usecases/knative.html">
            
                <a href="../usecases/knative.html">
            
                    
                    Knative
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.5" data-path="../usecases/edge-computing.html">
            
                <a href="../usecases/edge-computing.html">
            
                    
                    边缘计算
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.6" data-path="../usecases/ai.html">
            
                <a href="../usecases/ai.html">
            
                    
                    人工智能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.7" data-path="../usecases/observability.html">
            
                <a href="../usecases/observability.html">
            
                    
                    可观察性
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">开发指南</li>
        
        
    
        <li class="chapter " data-level="9.1" data-path="../develop/">
            
                <a href="../develop/">
            
                    
                    开发指南概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="../develop/sigs-and-working-group.html">
            
                <a href="../develop/sigs-and-working-group.html">
            
                    
                    SIG 和工作组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="../develop/developing-environment.html">
            
                <a href="../develop/developing-environment.html">
            
                    
                    开发环境搭建
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.3.1" data-path="../develop/using-vagrant-and-virtualbox-for-development.html">
            
                <a href="../develop/using-vagrant-and-virtualbox-for-development.html">
            
                    
                    本地分布式开发环境搭建（使用 Vagrant 和 Virtualbox）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="../develop/testing.html">
            
                <a href="../develop/testing.html">
            
                    
                    单元测试和集成测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.5" data-path="../develop/client-go-sample.html">
            
                <a href="../develop/client-go-sample.html">
            
                    
                    client-go 示例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.6" data-path="../develop/operator.html">
            
                <a href="../develop/operator.html">
            
                    
                    Operator
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.6.1" data-path="../develop/operator-sdk.html">
            
                <a href="../develop/operator-sdk.html">
            
                    
                    operator-sdk
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.7" data-path="../develop/kubebuilder.html">
            
                <a href="../develop/kubebuilder.html">
            
                    
                    kubebuilder
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.7.1" data-path="../develop/kubebuilder-example.html">
            
                <a href="../develop/kubebuilder-example.html">
            
                    
                    使用 kubebuilder 创建 operator 示例
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.8" data-path="../develop/advance-developer.html">
            
                <a href="../develop/advance-developer.html">
            
                    
                    高级开发指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.9" data-path="../develop/contribute.html">
            
                <a href="../develop/contribute.html">
            
                    
                    社区贡献
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.10" data-path="../develop/minikube.html">
            
                <a href="../develop/minikube.html">
            
                    
                    Minikube
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">社区及生态</li>
        
        
    
        <li class="chapter " data-level="10.1" data-path="../cloud-native/cncf.html">
            
                <a href="../cloud-native/cncf.html">
            
                    
                    云原生计算基金会（CNCF）
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1.1" data-path="../cloud-native/cncf-charter.html">
            
                <a href="../cloud-native/cncf-charter.html">
            
                    
                    CNCF 章程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.1.2" data-path="../cloud-native/cncf-sig.html">
            
                <a href="../cloud-native/cncf-sig.html">
            
                    
                    CNCF 特别兴趣小组（SIG）说明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.1.3" data-path="../cloud-native/cncf-sandbox-criteria.html">
            
                <a href="../cloud-native/cncf-sandbox-criteria.html">
            
                    
                    开源项目加入 CNCF Sandbox 的要求
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.1.4" data-path="../cloud-native/cncf-project-governing.html">
            
                <a href="../cloud-native/cncf-project-governing.html">
            
                    
                    CNCF 中的项目治理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.1.5" data-path="../cloud-native/cncf-ambassador.html">
            
                <a href="../cloud-native/cncf-ambassador.html">
            
                    
                    CNCF Ambassador
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="../cloud-native/cnc.html">
            
                <a href="../cloud-native/cnc.html">
            
                    
                    云原生社区
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="../cloud-native/certification.html">
            
                <a href="../cloud-native/certification.html">
            
                    
                    认证及培训
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.3.1" data-path="../appendix/about-kcsp.html">
            
                <a href="../appendix/about-kcsp.html">
            
                    
                    认证 Kubernetes 服务提供商（KCSP）说明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.3.2" data-path="../appendix/about-cka-candidate.html">
            
                <a href="../appendix/about-cka-candidate.html">
            
                    
                    认证 Kubernetes 管理员（CKA）说明
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">附录</li>
        
        
    
        <li class="chapter " data-level="11.1" data-path="../appendix/">
            
                <a href="../appendix/">
            
                    
                    附录说明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.2" data-path="../appendix/debug-kubernetes-services.html">
            
                <a href="../appendix/debug-kubernetes-services.html">
            
                    
                    Kubernetes 中的应用故障排查
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.3" data-path="../appendix/material-share.html">
            
                <a href="../appendix/material-share.html">
            
                    
                    Kubernetes 相关资讯和情报链接
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.4" data-path="../appendix/docker-best-practice.html">
            
                <a href="../appendix/docker-best-practice.html">
            
                    
                    Docker 最佳实践
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.5" data-path="../appendix/tricks.html">
            
                <a href="../appendix/tricks.html">
            
                    
                    使用技巧
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.6" data-path="../appendix/issues.html">
            
                <a href="../appendix/issues.html">
            
                    
                    问题记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.7" data-path="../appendix/kubernetes-changelog.html">
            
                <a href="../appendix/kubernetes-changelog.html">
            
                    
                    Kubernetes 版本更新日志
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.8" data-path="../appendix/summary-and-outlook.html">
            
                <a href="../appendix/summary-and-outlook.html">
            
                    
                    Kubernetes 及云原生年度总结及展望
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="11.8.1" data-path="../appendix/kubernetes-and-cloud-native-summary-in-2017-and-outlook-for-2018.html">
            
                <a href="../appendix/kubernetes-and-cloud-native-summary-in-2017-and-outlook-for-2018.html">
            
                    
                    Kubernetes 与云原生 2017 年年终总结及 2018 年展望
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.8.2" data-path="../appendix/kubernetes-and-cloud-native-summary-in-2018-and-outlook-for-2019.html">
            
                <a href="../appendix/kubernetes-and-cloud-native-summary-in-2018-and-outlook-for-2019.html">
            
                    
                    Kubernetes 与云原生 2018 年年终总结及 2019 年展望
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="11.9" data-path="../appendix/cncf-annual-report.html">
            
                <a href="../appendix/cncf-annual-report.html">
            
                    
                    CNCF 年度报告解读
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="11.9.1" data-path="../appendix/cncf-annual-report-2018.html">
            
                <a href="../appendix/cncf-annual-report-2018.html">
            
                    
                    CNCF 2018 年年度报告解读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.9.2" data-path="../appendix/cncf-annual-report-2020.html">
            
                <a href="../appendix/cncf-annual-report-2020.html">
            
                    
                    CNCF 2020 年年度报告解读
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >在 OpenShift 中使用 GlusterFS 做持久化存储</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="&#x5728;openshift&#x4E2D;&#x4F7F;&#x7528;glusterfs&#x505A;&#x6301;&#x4E45;&#x5316;&#x5B58;&#x50A8;">&#x5728;OpenShift&#x4E2D;&#x4F7F;&#x7528;GlusterFS&#x505A;&#x6301;&#x4E45;&#x5316;&#x5B58;&#x50A8;</h1>
<h3 id="&#x6982;&#x8FF0;">&#x6982;&#x8FF0;</h3>
<p>&#x672C;&#x6587;&#x7531;Daniel Messer&#xFF08;Technical Marketing Manager Storage @RedHat&#xFF09;&#x548C;Keith Tenzer&#xFF08;Solutions Architect @RedHat&#xFF09;&#x5171;&#x540C;&#x64B0;&#x5199;&#x3002;</p>
<ul>
<li><a href="https://keithtenzer.com/2017/03/07/storage-for-containers-overview-part-i/" target="_blank">Storage for Containers Overview &#x2013; Part I</a></li>
<li><a href="https://keithtenzer.com/2017/03/24/storage-for-containers-using-gluster-part-ii/" target="_blank">Storage for Containers using Gluster &#x2013; Part II</a></li>
<li><a href="https://keithtenzer.com/2017/03/29/storage-for-containers-using-container-native-storage-part-iii/" target="_blank">Storage for Containers using Container Native Storage &#x2013; Part III</a></li>
<li><a href="https://keithtenzer.com/2017/04/07/storage-for-containers-using-ceph-rbd-part-iv/" target="_blank">Storage for Containers using Ceph &#x2013; Part IV</a></li>
<li><a href="https://keithtenzer.com/2017/04/05/storage-for-containers-using-netapp-ontap-nas-part-v/" target="_blank">Storage for Containers using NetApp ONTAP NAS &#x2013; Part V</a></li>
<li><a href="https://keithtenzer.com/2017/04/05/storage-for-containers-using-netapp-solidfire-part-vi/" target="_blank">Storage for Containers using NetApp SolidFire &#x2013; Part VI</a></li>
</ul>
<h3 id="gluster&#x4F5C;&#x4E3A;container-ready-storagecrs">Gluster&#x4F5C;&#x4E3A;Container-Ready Storage(CRS)</h3>
<p>&#x5728;&#x672C;&#x6587;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4ECB;&#x7ECD;&#x5BB9;&#x5668;&#x5B58;&#x50A8;&#x7684;&#x9996;&#x9009;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x90E8;&#x7F72;&#x5B83;&#x3002; Kusternet&#x548C;OpenShift&#x652F;&#x6301;GlusterFS&#x5DF2;&#x7ECF;&#x6709;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E86;&#x3002; GlusterFS&#x7684;&#x9002;&#x7528;&#x6027;&#x5F88;&#x597D;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x7684;&#x90E8;&#x7F72;&#x573A;&#x666F;&#xFF1A;&#x88F8;&#x673A;&#x3001;&#x865A;&#x62DF;&#x673A;&#x3001;&#x5185;&#x90E8;&#x90E8;&#x7F72;&#x548C;&#x516C;&#x5171;&#x4E91;&#x3002; &#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;GlusterFS&#x7684;&#x65B0;&#x7279;&#x6027;&#x5C06;&#x5728;&#x672C;&#x7CFB;&#x5217;&#x540E;&#x9762;&#x8BA8;&#x8BBA;&#x3002;</p>
<p>GlusterFS&#x662F;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x5185;&#x7F6E;&#x4E86;&#x539F;&#x751F;&#x534F;&#x8BAE;&#xFF08;GlusterFS&#xFF09;&#x548C;&#x5404;&#x79CD;&#x5176;&#x4ED6;&#x534F;&#x8BAE;&#xFF08;NFS&#xFF0C;SMB&#xFF0C;...&#xFF09;&#x3002; &#x4E3A;&#x4E86;&#x4E0E;OpenShift&#x96C6;&#x6210;&#xFF0C;&#x8282;&#x70B9;&#x5C06;&#x901A;&#x8FC7;FUSE&#x4F7F;&#x7528;&#x539F;&#x751F;&#x534F;&#x8BAE;&#xFF0C;&#x5C06;GlusterFS&#x5377;&#x6302;&#x5728;&#x5230;&#x8282;&#x70B9;&#x672C;&#x8EAB;&#x4E0A;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5B83;&#x4EEC;&#x7ED1;&#x5B9A;&#x5230;&#x76EE;&#x6807;&#x5BB9;&#x5668;&#x4E2D;&#x3002; OpenShift / Kubernetes&#x5177;&#x6709;&#x5B9E;&#x73B0;&#x8BF7;&#x6C42;&#x3001;&#x91CA;&#x653E;&#x548C;&#x6302;&#x8F7D;&#x3001;&#x5378;&#x8F7D;GlusterFS&#x5377;&#x7684;&#x539F;&#x751F;&#x7A0B;&#x5E8F;&#x3002;</p>
<h3 id="crs&#x6982;&#x8FF0;">CRS&#x6982;&#x8FF0;</h3>
<p>&#x5728;&#x5B58;&#x50A8;&#x65B9;&#x9762;&#xFF0C;&#x6839;&#x636E;OpenShift / Kubernetes&#x7684;&#x8981;&#x6C42;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x7EC4;&#x4EF6;&#x7BA1;&#x7406;&#x96C6;&#x7FA4;&#xFF0C;&#x79F0;&#x4E3A;&#x201C;heketi&#x201D;&#x3002; &#x8FD9;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;GlusterFS&#x7684;REST API&#xFF0C;&#x5B83;&#x8FD8;&#x63D0;&#x4F9B;CLI&#x7248;&#x672C;&#x3002; &#x5728;&#x4EE5;&#x4E0B;&#x6B65;&#x9AA4;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5728;3&#x4E2A;GlusterFS&#x8282;&#x70B9;&#x4E2D;&#x90E8;&#x7F72;heketi&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x90E8;&#x7F72;GlusterFS&#x5B58;&#x50A8;&#x6C60;&#xFF0C;&#x5C06;&#x5176;&#x8FDE;&#x63A5;&#x5230;OpenShift&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x901A;&#x8FC7;PersistentVolumeClaims&#x4E3A;&#x5BB9;&#x5668;&#x914D;&#x7F6E;&#x5B58;&#x50A8;&#x3002; &#x6211;&#x4EEC;&#x5C06;&#x603B;&#x5171;&#x90E8;&#x7F72;4&#x53F0;&#x865A;&#x62DF;&#x673A;&#x3002; &#x4E00;&#x4E2A;&#x7528;&#x4E8E;OpenShift&#xFF08;&#x5B9E;&#x9A8C;&#x5BA4;&#x8BBE;&#x7F6E;&#xFF09;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;GlusterFS&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x60A8;&#x7684;&#x7CFB;&#x7EDF;&#x5E94;&#x81F3;&#x5C11;&#x9700;&#x8981;&#x6709;&#x56DB;&#x6838;CPU&#xFF0C;16GB RAM&#x548C;20 GB&#x53EF;&#x7528;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3002;</p>
<h3 id="&#x90E8;&#x7F72;openshift">&#x90E8;&#x7F72;OpenShift</h3>
<p>&#x9996;&#x5148;&#x4F60;&#x9700;&#x8981;&#x5148;&#x90E8;&#x7F72;OpenShift&#x3002;&#x6700;&#x6709;&#x6548;&#x7387;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x76F4;&#x63A5;&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x90E8;&#x7F72;&#x4E00;&#x4E2A;All-in-One&#x73AF;&#x5883;&#xFF0C;&#x90E8;&#x7F72;&#x6307;&#x5357;&#x89C1; <a href="https://keithtenzer.com/2017/03/13/openshift-enterprise-3-4-all-in-one-lab-environment/" target="_blank">the &#x201C;OpenShift Enterprise 3.4 all-in-one Lab Environment&#x201D; article.</a>&#x3002;</p>
<p>&#x786E;&#x4FDD;&#x4F60;&#x7684;OpenShift&#x865A;&#x62DF;&#x673A;&#x53EF;&#x4EE5;&#x89E3;&#x6790;&#x5916;&#x90E8;&#x57DF;&#x540D;&#x3002;&#x7F16;&#x8F91;<code>/etc/dnsmasq.conf</code>&#x6587;&#x4EF6;&#xFF0C;&#x589E;&#x52A0;&#x4E0B;&#x9762;&#x7684;Google DNS&#xFF1A;</p>
<pre class="language-"><code class="lang-ini"><span class="token constant">server</span><span class="token attr-value"><span class="token punctuation">=</span>8.8.8.8</span>
</code></pre>
<p>&#x91CD;&#x542F;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># systemctl restart dnsmasq</span>
<span class="token comment"># ping -c1 google.com</span>
</code></pre>
<h3 id="&#x90E8;&#x7F72;gluster">&#x90E8;&#x7F72;Gluster</h3>
<p>GlusterFS&#x81F3;&#x5C11;&#x9700;&#x8981;&#x6709;&#x4EE5;&#x4E0B;&#x914D;&#x7F6E;&#x7684;3&#x53F0;&#x865A;&#x62DF;&#x673A;&#xFF1A;</p>
<ul>
<li>RHEL 7.3</li>
<li>2 CPUs</li>
<li>2 GB&#x5185;&#x5B58;</li>
<li>30 GB&#x78C1;&#x76D8;&#x5B58;&#x50A8;&#x7ED9;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;</li>
<li>10 GB&#x78C1;&#x76D8;&#x5B58;&#x50A8;&#x7ED9;GlusterFS bricks</li>
</ul>
<p>&#x4FEE;&#x6539;/etc/hosts&#x6587;&#x4EF6;&#xFF0C;&#x5B9A;&#x4E49;&#x4E09;&#x53F0;&#x865A;&#x62DF;&#x673A;&#x7684;&#x4E3B;&#x673A;&#x540D;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF08;&#x4E3B;&#x673A;&#x540D;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4F60;&#x81EA;&#x5DF1;&#x7684;&#x73AF;&#x5883;&#x81EA;&#x7531;&#x8C03;&#x6574;&#xFF09;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># cat /etc/hosts</span>
<span class="token number">127.0</span>.0.1      localhost localhost.localdomain localhost4 localhost4.localdomain4
::1            localhost localhost.localdomain localhost6 localhost6.localdomain6
<span class="token number">172.16</span>.99.144  ocp-master.lab ocp-master
<span class="token number">172.16</span>.128.7   crs-node1.lab crs-node1
<span class="token number">172.16</span>.128.8   crs-node2.lab crs-node2
<span class="token number">172.16</span>.128.9   crs-node3.lab crs-node3
</code></pre>
<p><strong>&#x5728;3&#x53F0;GlusterFS&#x865A;&#x62DF;&#x673A;&#x4E0A;&#x90FD;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x6B65;&#x9AA4;</strong>&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># subscription-manager repos --disable=&quot;*&quot;</span>
<span class="token comment"># subscription-manager repos --enable=rhel-7-server-rpms</span>
</code></pre>
<p>&#x5982;&#x679C;&#x4F60;&#x5DF2;&#x7ECF;&#x8BA2;&#x9605;&#x4E86;GlusterFS&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#xFF0C;&#x5F00;&#x542F;<code>rh-gluster-3-for-rhel-7-server-rpms</code>&#x7684;yum&#x6E90;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;EPEL&#x4F7F;&#x7528;&#x975E;&#x5B98;&#x65B9;&#x652F;&#x6301;&#x7684;GlusterFS&#x7684;&#x793E;&#x533A;&#x6E90;&#x3002;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># yum -y install http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span>
<span class="token comment"># rpm --import http://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-7</span>
</code></pre>
<p>&#x5728;<code>/etc/yum.repos.d/</code>&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;<code>glusterfs-3.10.repo</code>&#x6587;&#x4EF6;&#xFF1A;</p>
<pre class="language-"><code class="lang-ini"><span class="token selector">[glusterfs-3.10]</span>
<span class="token constant">name</span><span class="token attr-value"><span class="token punctuation">=</span>glusterfs-3.10</span>
<span class="token constant">description</span><span class="token attr-value"><span class="token punctuation">=</span>&quot;GlusterFS 3.10 Community Version&quot;</span>
<span class="token constant">baseurl</span><span class="token attr-value"><span class="token punctuation">=</span>https://buildlogs.centos.org/centos/7/storage/x86_64/gluster-3.10/</span>
<span class="token constant">gpgcheck</span><span class="token attr-value"><span class="token punctuation">=</span>0</span>
<span class="token constant">enabled</span><span class="token attr-value"><span class="token punctuation">=</span>1</span>
</code></pre>
<p>&#x9A8C;&#x8BC1;&#x6E90;&#x5DF2;&#x7ECF;&#x88AB;&#x6FC0;&#x6D3B;&#x3002;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># yum repolist</span>
</code></pre>
<p>&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x5B89;&#x88C5;GlusterFS&#x4E86;&#x3002;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># yum -y install glusterfs-server</span>
</code></pre>
<p>&#x9700;&#x8981;&#x4E3A;GlusterFS peers&#x6253;&#x5F00;&#x51E0;&#x4E2A;&#x57FA;&#x672C;TCP&#x7AEF;&#x53E3;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E0E;OpenShift&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x5E76;&#x63D0;&#x4F9B;&#x5B58;&#x50A8;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># firewall-cmd --add-port=24007-24008/tcp --add-port=49152-49664/tcp --add-port=2222/tcp</span>
<span class="token comment"># firewall-cmd --runtime-to-permanent</span>
</code></pre>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x542F;&#x52A8;GlusterFS&#x7684;daemon&#x8FDB;&#x7A0B;&#x4E86;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># systemctl enable glusterd</span>
<span class="token comment"># systemctl start glusterd</span>
</code></pre>
<p>&#x5B8C;&#x6210;&#x3002;GlusterFS&#x5DF2;&#x7ECF;&#x542F;&#x52A8;&#x5E76;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x3002;&#x5176;&#x4ED6;&#x914D;&#x7F6E;&#x5C06;&#x901A;&#x8FC7;heketi&#x5B8C;&#x6210;&#x3002;</p>
<p><strong>&#x5728;GlusterFS&#x7684;&#x4E00;&#x53F0;&#x865A;&#x62DF;&#x673A;&#x4E0A;&#x5B89;&#x88C5;heketi</strong></p>
<pre class="language-"><code class="lang-bash"><span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># yum -y install heketi heketi-client</span>
</code></pre>
<h3 id="&#x66F4;&#x65B0;epel">&#x66F4;&#x65B0;EPEL</h3>
<p>&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;Red Hat Gluster Storage&#x8BA2;&#x9605;&#x7684;&#x8BDD;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4ECE;EPEL&#x4E2D;&#x83B7;&#x53D6;heketi&#x3002; &#x5728;&#x64B0;&#x5199;&#x672C;&#x6587;&#x65F6;&#xFF0C;2016&#x5E74;10&#x6708;&#x90A3;&#x65F6;&#x5019;&#x8FD8;&#x662F;3.0.0-1.el7&#x7248;&#x672C;&#xFF0C;&#x5B83;&#x4E0D;&#x9002;&#x7528;&#x4E8E;OpenShift 3.4&#x3002; &#x4F60;&#x5C06;&#x9700;&#x8981;&#x66F4;&#x65B0;&#x5230;&#x66F4;&#x65B0;&#x7684;&#x7248;&#x672C;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># yum -y install wget</span>
<span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># wget https://github.com/heketi/heketi/releases/download/v4.0.0/heketi-v4.0.0.linux.amd64.tar.gz</span>
<span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># tar -xzf heketi-v4.0.0.linux.amd64.tar.gz</span>
<span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl stop heketi</span>
<span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># cp heketi/heketi* /usr/bin/</span>
<span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># chown heketi:heketi /usr/bin/heketi*</span>
</code></pre>
<p>&#x5728;<code>/etc/systemd/system/heketi.service</code>&#x4E2D;&#x521B;&#x5EFA;v4&#x7248;&#x672C;&#x7684;heketi&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x7684;&#x66F4;&#x65B0;&#x8BED;&#x6CD5;&#x6587;&#x4EF6;&#xFF1A;</p>
<pre class="language-"><code class="lang-ini"><span class="token selector">[Unit]</span>
<span class="token constant">Description</span><span class="token attr-value"><span class="token punctuation">=</span>Heketi Server</span>

<span class="token selector">[Service]</span>
<span class="token constant">Type</span><span class="token attr-value"><span class="token punctuation">=</span>simple</span>
<span class="token constant">WorkingDirectory</span><span class="token attr-value"><span class="token punctuation">=</span>/var/lib/heketi</span>
<span class="token constant">EnvironmentFile</span><span class="token attr-value"><span class="token punctuation">=</span>-/etc/heketi/heketi.json</span>
<span class="token constant">User</span><span class="token attr-value"><span class="token punctuation">=</span>heketi</span>
<span class="token constant">ExecStart</span><span class="token attr-value"><span class="token punctuation">=</span>/usr/bin/heketi --config=/etc/heketi/heketi.json</span>
<span class="token constant">Restart</span><span class="token attr-value"><span class="token punctuation">=</span>on-failure</span>
<span class="token constant">StandardOutput</span><span class="token attr-value"><span class="token punctuation">=</span>syslog</span>
<span class="token constant">StandardError</span><span class="token attr-value"><span class="token punctuation">=</span>syslog</span>

<span class="token selector">[Install]</span>
<span class="token constant">WantedBy</span><span class="token attr-value"><span class="token punctuation">=</span>multi-user.target</span>
</code></pre>
<pre class="language-"><code class="lang-bash"><span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl daemon-reload</span>
<span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl start heketi</span>
</code></pre>
<p>Heketi&#x4F7F;&#x7528;SSH&#x6765;&#x914D;&#x7F6E;GlusterFS&#x7684;&#x6240;&#x6709;&#x8282;&#x70B9;&#x3002;&#x521B;&#x5EFA;SSH&#x5BC6;&#x94A5;&#x5BF9;&#xFF0C;&#x5C06;&#x516C;&#x94A5;&#x62F7;&#x8D1D;&#x5230;&#x6240;&#x6709;3&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#xFF08;&#x5305;&#x62EC;&#x4F60;&#x767B;&#x9646;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF09;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># ssh-keygen -f /etc/heketi/heketi_key -t rsa -N &apos;&apos;</span>
<span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id -i /etc/heketi/heketi_key.pub root@crs-node1.lab</span>
<span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id -i /etc/heketi/heketi_key.pub root@crs-node2.lab</span>
<span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id -i /etc/heketi/heketi_key.pub root@crs-node3.lab</span>
<span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># chown heketi:heketi /etc/heketi/heketi_key*</span>
</code></pre>
<p>&#x5269;&#x4E0B;&#x552F;&#x4E00;&#x8981;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x5C31;&#x662F;&#x914D;&#x7F6E;heketi&#x6765;&#x4F7F;&#x7528;SSH&#x3002; &#x7F16;&#x8F91;<code>/etc/heketi/heketi.json</code>&#x6587;&#x4EF6;&#x4F7F;&#x5B83;&#x770B;&#x8D77;&#x6765;&#x50CF;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;&#xFF08;&#x6539;&#x53D8;&#x7684;&#x90E8;&#x5206;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x4E0B;&#x5212;&#x7EBF;&#xFF09;&#xFF1A;</p>
<pre class="language-"><code class="lang-json"><span class="token punctuation">{</span>
   <span class="token property">&quot;_port_comment&quot;</span><span class="token operator">:</span><span class="token string">&quot;Heketi Server Port Number&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;port&quot;</span><span class="token operator">:</span><span class="token string">&quot;8080&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;_use_auth&quot;</span><span class="token operator">:</span><span class="token string">&quot;Enable JWT authorization. Please enable for deployment&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;use_auth&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
   <span class="token property">&quot;_jwt&quot;</span><span class="token operator">:</span><span class="token string">&quot;Private keys for access&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;jwt&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;_admin&quot;</span><span class="token operator">:</span><span class="token string">&quot;Admin has access to all APIs&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;admin&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
         <span class="token property">&quot;key&quot;</span><span class="token operator">:</span><span class="token string">&quot;My Secret&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;_user&quot;</span><span class="token operator">:</span><span class="token string">&quot;User only has access to /volumes endpoint&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;user&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
         <span class="token property">&quot;key&quot;</span><span class="token operator">:</span><span class="token string">&quot;My Secret&quot;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token property">&quot;_glusterfs_comment&quot;</span><span class="token operator">:</span><span class="token string">&quot;GlusterFS Configuration&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;glusterfs&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;_executor_comment&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
         <span class="token string">&quot;Execute plugin. Possible choices: mock, ssh&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;mock: This setting is used for testing and development.&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot; It will not send commands to any node.&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;ssh: This setting will notify Heketi to ssh to the nodes.&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot; It will need the values in sshexec to be configured.&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;kubernetes: Communicate with GlusterFS containers over&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot; Kubernetes exec api.&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;executor&quot;</span><span class="token operator">:</span><span class="token string">&quot;ssh&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;_sshexec_comment&quot;</span><span class="token operator">:</span><span class="token string">&quot;SSH username and private key file information&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sshexec&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
         <span class="token property">&quot;keyfile&quot;</span><span class="token operator">:</span><span class="token string">&quot;/etc/heketi/heketi_key&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;user&quot;</span><span class="token operator">:</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;port&quot;</span><span class="token operator">:</span><span class="token string">&quot;22&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;fstab&quot;</span><span class="token operator">:</span><span class="token string">&quot;/etc/fstab&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;_kubeexec_comment&quot;</span><span class="token operator">:</span><span class="token string">&quot;Kubernetes configuration&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;kubeexec&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
         <span class="token property">&quot;host&quot;</span><span class="token operator">:</span><span class="token string">&quot;https://kubernetes.host:8443&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;cert&quot;</span><span class="token operator">:</span><span class="token string">&quot;/path/to/crt.file&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;insecure&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
         <span class="token property">&quot;user&quot;</span><span class="token operator">:</span><span class="token string">&quot;kubernetes username&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;password&quot;</span><span class="token operator">:</span><span class="token string">&quot;password for kubernetes user&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;namespace&quot;</span><span class="token operator">:</span><span class="token string">&quot;OpenShift project or Kubernetes namespace&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;fstab&quot;</span><span class="token operator">:</span><span class="token string">&quot;Optional: Specify fstab file on node. Default is /etc/fstab&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;_db_comment&quot;</span><span class="token operator">:</span><span class="token string">&quot;Database file name&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;db&quot;</span><span class="token operator">:</span><span class="token string">&quot;/var/lib/heketi/heketi.db&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;_loglevel_comment&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
         <span class="token string">&quot;Set log level. Choices are:&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot; none, critical, error, warning, info, debug&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;Default is warning&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;loglevel&quot;</span><span class="token operator">:</span><span class="token string">&quot;debug&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5B8C;&#x6210;&#x3002;heketi&#x5C06;&#x76D1;&#x542C;8080&#x7AEF;&#x53E3;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x786E;&#x8BA4;&#x4E0B;&#x9632;&#x706B;&#x5899;&#x89C4;&#x5219;&#x5141;&#x8BB8;&#x5B83;&#x76D1;&#x542C;&#x8BE5;&#x7AEF;&#x53E3;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># firewall-cmd --add-port=8080/tcp</span>
<span class="token comment"># firewall-cmd --runtime-to-permanent</span>
</code></pre>
<p>&#x91CD;&#x542F;heketi&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># systemctl enable heketi</span>
<span class="token comment"># systemctl restart heketi</span>
</code></pre>
<p>&#x6D4B;&#x8BD5;&#x5B83;&#x662F;&#x5426;&#x5728;&#x8FD0;&#x884C;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># curl http://crs-node1.lab:8080/hello</span>
Hello from Heketi
</code></pre>
<p>&#x5F88;&#x597D;&#x3002;heketi&#x4E0A;&#x573A;&#x7684;&#x65F6;&#x5019;&#x5230;&#x4E86;&#x3002; &#x6211;&#x4EEC;&#x5C06;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x914D;&#x7F6E;&#x6211;&#x4EEC;&#x7684;GlusterFS&#x5B58;&#x50A8;&#x6C60;&#x3002; &#x8BE5;&#x8F6F;&#x4EF6;&#x5DF2;&#x7ECF;&#x5728;&#x6211;&#x4EEC;&#x6240;&#x6709;&#x7684;&#x865A;&#x62DF;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#xFF0C;&#x4F46;&#x5E76;&#x672A;&#x88AB;&#x914D;&#x7F6E;&#x3002; &#x8981;&#x5C06;&#x5176;&#x6539;&#x9020;&#x4E3A;&#x6EE1;&#x8DB3;&#x6211;&#x4EEC;&#x9700;&#x6C42;&#x7684;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x62D3;&#x6251;&#x6587;&#x4EF6;&#x4E2D;&#x63CF;&#x8FF0;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x7684;GlusterFS&#x5B58;&#x50A8;&#x6C60;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># vi topology.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;clusters&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token string">&quot;nodes&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;hostnames&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
              <span class="token string">&quot;manage&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;crs-node1.lab&quot;</span>
              <span class="token punctuation">]</span>,
              <span class="token string">&quot;storage&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;172.16.128.7&quot;</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>
          <span class="token punctuation">}</span>,
          <span class="token string">&quot;devices&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;/dev/sdb&quot;</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
          <span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;hostnames&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
              <span class="token string">&quot;manage&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;crs-node2.lab&quot;</span>
              <span class="token punctuation">]</span>,
              <span class="token string">&quot;storage&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;172.16.128.8&quot;</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>
          <span class="token punctuation">}</span>,
          <span class="token string">&quot;devices&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;/dev/sdb&quot;</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
          <span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;hostnames&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
              <span class="token string">&quot;manage&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;crs-node3.lab&quot;</span>
              <span class="token punctuation">]</span>,
              <span class="token string">&quot;storage&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;172.16.128.9&quot;</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>
          <span class="token punctuation">}</span>,
          <span class="token string">&quot;devices&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;/dev/sdb&quot;</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8BE5;&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x662F;&#x544A;&#x8BC9;heketi&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;3&#x8282;&#x70B9;&#x7684;&#x96C6;&#x7FA4;&#xFF0C;&#x5176;&#x4E2D;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x5305;&#x542B;&#x7684;&#x914D;&#x7F6E;&#x6709;FQDN&#xFF0C;IP&#x5730;&#x5740;&#x4EE5;&#x53CA;&#x81F3;&#x5C11;&#x4E00;&#x4E2A;&#x5C06;&#x7528;&#x4F5C;GlusterFS&#x5757;&#x7684;&#x5907;&#x7528;&#x5757;&#x8BBE;&#x5907;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x5C06;&#x8BE5;&#x6587;&#x4EF6;&#x53D1;&#x9001;&#x7ED9;heketi&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># export HEKETI_CLI_SERVER=http://crs-node1.lab:8080</span>
<span class="token comment"># heketi-cli topology load --json=topology.json</span>
Creating cluster <span class="token punctuation">..</span>. ID: 78cdb57aa362f5284bc95b2549bc7e7d
 Creating node crs-node1.lab <span class="token punctuation">..</span>. ID: ffd7671c0083d88aeda9fd1cb40b339b
 Adding device /dev/sdb <span class="token punctuation">..</span>. OK
 Creating node crs-node2.lab <span class="token punctuation">..</span>. ID: 8220975c0a4479792e684584153050a9
 Adding device /dev/sdb <span class="token punctuation">..</span>. OK
 Creating node crs-node3.lab <span class="token punctuation">..</span>. ID: b94f14c4dbd8850f6ac589ac3b39cc8e
 Adding device /dev/sdb <span class="token punctuation">..</span>. OK
</code></pre>
<p>&#x73B0;&#x5728;heketi&#x5DF2;&#x7ECF;&#x914D;&#x7F6E;&#x4E86;3&#x4E2A;&#x8282;&#x70B9;&#x7684;GlusterFS&#x5B58;&#x50A8;&#x6C60;&#x3002;&#x5F88;&#x7B80;&#x5355;&#xFF01;&#x4F60;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x770B;&#x5230;3&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x90FD;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#x6784;&#x6210;&#x4E86;GlusterFS&#x4E2D;&#x7684;&#x53EF;&#x4FE1;&#x5B58;&#x50A8;&#x6C60;&#xFF08;Trusted Stroage Pool&#xFF09;&#x3002;</p>
<pre class="language-"><code class="lang-bash"><span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># gluster peer status</span>
Number of Peers: <span class="token number">2</span>

Hostname: crs-node2.lab
Uuid: 93b34946-9571-46a8-983c-c9f128557c0e
State: Peer <span class="token keyword">in</span> Cluster <span class="token punctuation">(</span>Connected<span class="token punctuation">)</span>
Other names:
crs-node2.lab

Hostname: <span class="token number">172.16</span>.128.9
Uuid: e3c1f9b0-be97-42e5-beda-f70fc05f47ea
State: Peer <span class="token keyword">in</span> Cluster <span class="token punctuation">(</span>Connected<span class="token punctuation">)</span>
</code></pre>
<p>&#x73B0;&#x5728;&#x56DE;&#x5230;OpenShift&#xFF01;</p>
<h3 id="&#x5C06;gluster&#x4E0E;openshift&#x96C6;&#x6210;">&#x5C06;Gluster&#x4E0E;OpenShift&#x96C6;&#x6210;</h3>
<p>&#x4E3A;&#x4E86;&#x96C6;&#x6210;OpenShift&#xFF0C;&#x9700;&#x8981;&#x4E24;&#x6837;&#x4E1C;&#x897F;&#xFF1A;&#x4E00;&#x4E2A;&#x52A8;&#x6001;&#x7684;Kubernetes Storage Provisioner&#x548C;&#x4E00;&#x4E2A;StorageClass&#x3002; Provisioner&#x5728;OpenShift&#x4E2D;&#x5F00;&#x7BB1;&#x5373;&#x7528;&#x3002; &#x5B9E;&#x9645;&#x4E0A;&#x5173;&#x952E;&#x7684;&#x662F;&#x5982;&#x4F55;&#x5C06;&#x5B58;&#x50A8;&#x6302;&#x8F7D;&#x5230;&#x5BB9;&#x5668;&#x4E0A;&#x3002; StorageClass&#x662F;OpenShift&#x4E2D;&#x7684;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x7684;PersistentVolumeClaims&#x7684;&#x5B9E;&#x4F53;&#xFF0C;&#x5B83;&#x53CD;&#x8FC7;&#x6765;&#x80FD;&#x591F;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;Provisioner&#x5B9E;&#x73B0;&#x5B9E;&#x9645;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x8868;&#x793A;&#x4E3A;Kubernetes PersistentVolume&#xFF08;PV&#xFF09;&#x3002;</p>
<p>&#x5C31;&#x50CF;OpenShift&#x4E2D;&#x7684;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#x4E00;&#x6837;&#xFF0C;StorageClass&#x4E5F;&#x7B80;&#x5355;&#x7684;&#x7528;YAML&#x6587;&#x4EF6;&#x5B9A;&#x4E49;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># cat crs-storageclass.yaml</span>
kind: StorageClass
apiVersion: storage.k8s.io/v1beta1
metadata:
 name: container-ready-storage
 annotations:
 storageclass.beta.kubernetes.io/is-default-class: <span class="token string">&quot;true&quot;</span>
provisioner: kubernetes.io/glusterfs
parameters:
 resturl: <span class="token string">&quot;http://crs-node1.lab:8080&quot;</span>
 restauthenabled: <span class="token string">&quot;false&quot;</span>
</code></pre>
<p>&#x6211;&#x4EEC;&#x7684;provisioner&#x662F;kubernetes.io/glusterfs&#xFF0C;&#x5C06;&#x5B83;&#x6307;&#x5411;&#x6211;&#x4EEC;&#x7684;heketi&#x5B9E;&#x4F8B;&#x3002; &#x6211;&#x4EEC;&#x5C06;&#x7C7B;&#x547D;&#x540D;&#x4E3A;&#x201C;container-ready-storage&#x201D;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x5176;&#x6210;&#x4E3A;&#x6240;&#x6709;&#x6CA1;&#x6709;&#x663E;&#x793A;&#x6307;&#x5B9A;StorageClass&#x7684;PersistentVolumeClaim&#x7684;&#x9ED8;&#x8BA4;StorageClass&#x3002;</p>
<p>&#x4E3A;&#x4F60;&#x7684;GlusterFS&#x6C60;&#x521B;&#x5EFA;StorageClass&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># oc create -f crs-storageclass.yaml</span>
</code></pre>
<h3 id="&#x5728;openshift&#x4E2D;&#x4F7F;&#x7528;gluster">&#x5728;OpenShift&#x4E2D;&#x4F7F;&#x7528;Gluster</h3>
<p>&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x5982;&#x4F55;&#x5728;OpenShift&#x4E2D;&#x4F7F;&#x7528;GlusterFS&#x3002;&#x9996;&#x5148;&#x5728;OpenShift&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x9879;&#x76EE;&#x3002;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># oc new-project crs-storage --display-name=&quot;Container-Ready Storage&quot;</span>
</code></pre>
<p>&#x8FD9;&#x4F1A;&#x5411;Kubernetes/OpenShift&#x53D1;&#x51FA;storage&#x8BF7;&#x6C42;&#xFF0C;&#x8BF7;&#x6C42;&#x4E00;&#x4E2A;PersistentVolumeClaim&#xFF08;PVC&#xFF09;&#x3002; &#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x5B83;&#x63CF;&#x8FF0;&#x6700;&#x5C11;&#x9700;&#x8981;&#x591A;&#x5C11;&#x5BB9;&#x91CF;&#x548C;&#x5E94;&#x8BE5;&#x63D0;&#x4F9B;&#x54EA;&#x79CD;&#x8BBF;&#x95EE;&#x6A21;&#x5F0F;&#xFF08;&#x975E;&#x5171;&#x4EAB;&#xFF0C;&#x5171;&#x4EAB;&#xFF0C;&#x53EA;&#x8BFB;&#xFF09;&#x3002; &#x5B83;&#x901A;&#x5E38;&#x662F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6A21;&#x677F;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;PVC&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># cat crs-claim.yaml</span>
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
 name: my-crs-storage
 namespace: crs-storage
spec:
 accessModes:
 - ReadWriteOnce
 resources:
 requests:
 storage: 1Gi
</code></pre>
<p>&#x53D1;&#x9001;&#x8BE5;&#x8BF7;&#x6C42;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># oc create -f crs-claim.yaml</span>
</code></pre>
<p>&#x89C2;&#x5BDF;&#x5728;OpenShfit&#x4E2D;&#xFF0C;PVC&#x6B63;&#x5728;&#x4EE5;&#x52A8;&#x6001;&#x521B;&#x5EFA;volume&#x7684;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># oc get pvc</span>
NAME             STATUS    VOLUME                                     CAPACITY   ACCESSMODES   AGE
my-crs-storage   Bound     pvc-41ad5adb-107c-11e7-afae-000c2949cce7   1Gi        RWO           58s
</code></pre>
<p>&#x592A;&#x68D2;&#x4E86;&#xFF01; &#x4F60;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5728;OpenShift&#x4E2D;&#x4F7F;&#x7528;&#x5B58;&#x50A8;&#x5BB9;&#x91CF;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x76F4;&#x63A5;&#x4E0E;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x4EA4;&#x4E92;&#x3002; &#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x521B;&#x5EFA;&#x7684;volume&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># oc get pv/pvc-41ad5adb-107c-11e7-afae-000c2949cce7</span>
Name:        pvc-41ad5adb-107c-11e7-afae-000c2949cce7
Labels:        
StorageClass:    container-ready-storage
Status:        Bound
Claim:        crs-storage/my-crs-storage
Reclaim Policy:    Delete
Access Modes:    RWO
Capacity:    1Gi
Message:
Source:
    Type:        Glusterfs <span class="token punctuation">(</span>a Glusterfs <span class="token function">mount</span> on the <span class="token function">host</span> that shares a pod&apos;s lifetime<span class="token punctuation">)</span>
    EndpointsName:    gluster-dynamic-my-crs-storage
    Path:        vol_85e444ee3bc154de084976a9aef16025
    ReadOnly:        <span class="token boolean">false</span>
</code></pre>
<p>What happened in the background was that when the PVC reached the system, our default StorageClass reached out to the GlusterFS Provisioner with the volume specs from the PVC. The provisioner in turn communicates with our heketi instance which facilitates the creation of the GlusterFS volume, which we can trace in it&#x2019;s log messages:</p>
<p>&#x8BE5;volume&#x662F;&#x6839;&#x636E;PVC&#x4E2D;&#x7684;&#x5B9A;&#x4E49;&#x7279;&#x522B;&#x521B;&#x5EFA;&#x7684;&#x3002; &#x5728;PVC&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x660E;&#x786E;&#x6307;&#x5B9A;&#x8981;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;StorageClass&#xFF0C;&#x56E0;&#x4E3A;heketi&#x7684;GlusterFS StorageClass&#x5DF2;&#x7ECF;&#x88AB;&#x5B9A;&#x4E49;&#x4E3A;&#x7CFB;&#x7EDF;&#x8303;&#x56F4;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</p>
<p>&#x5728;&#x540E;&#x53F0;&#x53D1;&#x751F;&#x7684;&#x60C5;&#x51B5;&#x662F;&#xFF0C;&#x5F53;PVC&#x5230;&#x8FBE;&#x7CFB;&#x7EDF;&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684;StorageClass&#x8BF7;&#x6C42;&#x5177;&#x6709;&#x8BE5;PVC&#x4E2D;volume&#x58F0;&#x660E;&#x89C4;&#x683C;&#x7684;GlusterFS Provisioner&#x3002; Provisioner&#x53C8;&#x4E0E;&#x6211;&#x4EEC;&#x7684;heketi&#x5B9E;&#x4F8B;&#x901A;&#x4FE1;&#xFF0C;&#x8FD9;&#x6709;&#x52A9;&#x4E8E;&#x521B;&#x5EFA;GlusterFS volume&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x5176;&#x65E5;&#x5FD7;&#x6D88;&#x606F;&#x4E2D;&#x8FFD;&#x8E2A;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># journalctl -l -u heketi.service</span>
<span class="token punctuation">..</span>.
Mar <span class="token number">24</span> <span class="token number">11</span>:25:52 crs-node1.lab heketi<span class="token punctuation">[</span><span class="token number">2598</span><span class="token punctuation">]</span>: <span class="token punctuation">[</span>heketi<span class="token punctuation">]</span> DEBUG <span class="token number">2017</span>/03/24 <span class="token number">11</span>:25:52 /src/github.com/heketi/heketi/apps/glusterfs/volume_entry.go:298: Volume to be created on cluster e
Mar <span class="token number">24</span> <span class="token number">11</span>:25:52 crs-node1.lab heketi<span class="token punctuation">[</span><span class="token number">2598</span><span class="token punctuation">]</span>: <span class="token punctuation">[</span>heketi<span class="token punctuation">]</span> INFO <span class="token number">2017</span>/03/24 <span class="token number">11</span>:25:52 Creating brick 9e791b1daa12af783c9195941fe63103
Mar <span class="token number">24</span> <span class="token number">11</span>:25:52 crs-node1.lab heketi<span class="token punctuation">[</span><span class="token number">2598</span><span class="token punctuation">]</span>: <span class="token punctuation">[</span>heketi<span class="token punctuation">]</span> INFO <span class="token number">2017</span>/03/24 <span class="token number">11</span>:25:52 Creating brick 3e06af2f855bef521a95ada91680d14b
Mar <span class="token number">24</span> <span class="token number">11</span>:25:52 crs-node1.lab heketi<span class="token punctuation">[</span><span class="token number">2598</span><span class="token punctuation">]</span>: <span class="token punctuation">[</span>heketi<span class="token punctuation">]</span> INFO <span class="token number">2017</span>/03/24 <span class="token number">11</span>:25:52 Creating brick e4daa240f1359071e3f7ea22618cfbab
<span class="token punctuation">..</span>.
Mar <span class="token number">24</span> <span class="token number">11</span>:25:52 crs-node1.lab heketi<span class="token punctuation">[</span><span class="token number">2598</span><span class="token punctuation">]</span>: <span class="token punctuation">[</span>sshexec<span class="token punctuation">]</span> INFO <span class="token number">2017</span>/03/24 <span class="token number">11</span>:25:52 Creating volume vol_85e444ee3bc154de084976a9aef16025 replica <span class="token number">3</span>
<span class="token punctuation">..</span>.
Mar <span class="token number">24</span> <span class="token number">11</span>:25:53 crs-node1.lab heketi<span class="token punctuation">[</span><span class="token number">2598</span><span class="token punctuation">]</span>: Result: volume create: vol_85e444ee3bc154de084976a9aef16025: success: please start the volume to access data
<span class="token punctuation">..</span>.
Mar <span class="token number">24</span> <span class="token number">11</span>:25:55 crs-node1.lab heketi<span class="token punctuation">[</span><span class="token number">2598</span><span class="token punctuation">]</span>: Result: volume start: vol_85e444ee3bc154de084976a9aef16025: success
<span class="token punctuation">..</span>.
Mar <span class="token number">24</span> <span class="token number">11</span>:25:55 crs-node1.lab heketi<span class="token punctuation">[</span><span class="token number">2598</span><span class="token punctuation">]</span>: <span class="token punctuation">[</span>asynchttp<span class="token punctuation">]</span> INFO <span class="token number">2017</span>/03/24 <span class="token number">11</span>:25:55 Completed job c3d6c4f9fc74796f4a5262647dc790fe <span class="token keyword">in</span> <span class="token number">3</span>.176522702s
<span class="token punctuation">..</span>.
</code></pre>
<p>&#x6210;&#x529F;&#xFF01; &#x5927;&#x7EA6;&#x7528;&#x4E86;3&#x79D2;&#x949F;&#xFF0C;GlusterFS&#x6C60;&#x5C31;&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x5E76;&#x914D;&#x7F6E;&#x4E86;&#x4E00;&#x4E2A;volume&#x3002; &#x9ED8;&#x8BA4;&#x503C;&#x662F;replica 3&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x6570;&#x636E;&#x5C06;&#x88AB;&#x590D;&#x5236;&#x5230;3&#x4E2A;&#x4E0D;&#x540C;&#x8282;&#x70B9;&#x7684;3&#x4E2A;&#x5757;&#x4E0A;&#xFF08;&#x7528;GlusterFS&#x4F5C;&#x4E3A;&#x540E;&#x7AEF;&#x5B58;&#x50A8;&#xFF09;&#x3002; &#x8BE5;&#x8FC7;&#x7A0B;&#x662F;&#x901A;&#x8FC7;Heketi&#x5728;OpenShift&#x8FDB;&#x884C;&#x7F16;&#x6392;&#x7684;&#x3002;</p>
<p>&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4ECE;GlusterFS&#x7684;&#x89D2;&#x5EA6;&#x770B;&#x5230;&#x6709;&#x5173;volume&#x7684;&#x4FE1;&#x606F;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># gluster volume list</span>
vol_85e444ee3bc154de084976a9aef16025
<span class="token punctuation">[</span>root@crs-node1 ~<span class="token punctuation">]</span><span class="token comment"># gluster volume info vol_85e444ee3bc154de084976a9aef16025</span>

Volume Name: vol_85e444ee3bc154de084976a9aef16025
Type: Replicate
Volume ID: a32168c8-858e-472a-b145-08c20192082b
Status: Started
Snapshot Count: <span class="token number">0</span>
Number of Bricks: <span class="token number">1</span> x <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">3</span>
Transport-type: tcp
Bricks:
Brick1: <span class="token number">172.16</span>.128.8:/var/lib/heketi/mounts/vg_147b43f6f6903be8b23209903b7172ae/brick_9e791b1daa12af783c9195941fe63103/brick
Brick2: <span class="token number">172.16</span>.128.9:/var/lib/heketi/mounts/vg_72c0f520b0c57d807be21e9c90312f85/brick_3e06af2f855bef521a95ada91680d14b/brick
Brick3: <span class="token number">172.16</span>.128.7:/var/lib/heketi/mounts/vg_67314f879686de975f9b8936ae43c5c5/brick_e4daa240f1359071e3f7ea22618cfbab/brick
Options Reconfigured:
transport.address-family: inet
nfs.disable: on
</code></pre>
<p>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;GlusterFS&#x4E2D;&#x7684;&#x5377;&#x540D;&#x79F0;&#x5982;&#x4F55;&#x5BF9;&#x5E94;&#x4E8E;OpenShift&#x4E2D;Kubernetes Persistent Volume&#x7684;&#x201C;&#x8DEF;&#x5F84;&#x201D;&#x3002;</p>
<p>&#x6216;&#x8005;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;OpenShift UI&#x6765;&#x914D;&#x7F6E;&#x5B58;&#x50A8;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x5730;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5DF2;&#x77E5;&#x7684;StorageClasses&#x4E2D;&#x8FDB;&#x884C;&#x9009;&#x62E9;&#xFF1A;</p>
<p><img src="../images/create-gluster-storage.png" alt="&#x521B;&#x5EFA;&#x5B58;&#x50A8;"></p>
<p><img src="https://keithtenzer.files.wordpress.com/2017/03/screen-shot-2017-03-24-at-11-09-341.png?w=440" alt="Screen Shot 2017-03-24 at 11.09.34.png"></p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x505A;&#x70B9;&#x66F4;&#x6709;&#x8DA3;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x5728;OpenShift&#x4E2D;&#x8FD0;&#x884C;&#x5DE5;&#x4F5C;&#x8D1F;&#x8F7D;&#x3002;</p>
<p>&#x5728;&#x4ECD;&#x8FD0;&#x884C;&#x7740;crs-storage&#x9879;&#x76EE;&#x7684;OpenShift&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x6267;&#x884C;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># oc get templates -n openshift</span>
</code></pre>
<p>&#x4F60;&#x5E94;&#x8BE5;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x548C;&#x6570;&#x636E;&#x5E93;&#x6A21;&#x677F;&#x5217;&#x8868;&#xFF0C;&#x8FD9;&#x4E2A;&#x5217;&#x8868;&#x5C06;&#x65B9;&#x4FBF;&#x4F60;&#x66F4;&#x8F7B;&#x677E;&#x7684;&#x4F7F;&#x7528;OpenShift&#x6765;&#x90E8;&#x7F72;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x9879;&#x76EE;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x5C06;&#x4F7F;&#x7528;MySQL&#x6765;&#x6F14;&#x793A;&#x5982;&#x4F55;&#x5728;OpenShift&#x4E0A;&#x90E8;&#x7F72;&#x5177;&#x6709;&#x6301;&#x4E45;&#x5316;&#x548C;&#x5F39;&#x6027;&#x5B58;&#x50A8;&#x7684;&#x6709;&#x72B6;&#x6001;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002; Mysql-persistent&#x6A21;&#x677F;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;MySQL&#x6570;&#x636E;&#x5E93;&#x76EE;&#x5F55;&#x7684;1G&#x7A7A;&#x95F4;&#x7684;PVC&#x3002; &#x4E3A;&#x4E86;&#x6F14;&#x793A;&#x76EE;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># oc process mysql-persistent -n openshift | oc create -f -</span>
</code></pre>
<p>&#x7B49;&#x5F85;&#x90E8;&#x7F72;&#x5B8C;&#x6210;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;UI&#x6216;&#x8005;&#x547D;&#x4EE4;&#x884C;&#x89C2;&#x5BDF;&#x90E8;&#x7F72;&#x8FDB;&#x5EA6;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># oc get pods</span>
NAME            READY     STATUS    RESTARTS   AGE
mysql-1-h4afb   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          2m
</code></pre>
<p>&#x597D;&#x4E86;&#x3002;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x6A21;&#x677F;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;service&#xFF0C;secrets&#x3001;PVC&#x548C;pod&#x3002;&#x6211;&#x4EEC;&#x6765;&#x4F7F;&#x7528;&#x5B83;&#xFF08;&#x4F60;&#x7684;pod&#x540D;&#x5B57;&#x5C06;&#x8DDF;&#x6211;&#x7684;&#x4E0D;&#x540C;&#xFF09;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># oc rsh mysql-1-h4afb</span>
</code></pre>
<p>&#x4F60;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#x7684;&#x5C06;&#x5B83;&#x6302;&#x8F7D;&#x5230;MySQL&#x7684;pod&#x4E0A;&#x3002;&#x6211;&#x4EEC;&#x8FDE;&#x63A5;&#x4E00;&#x4E0B;&#x6570;&#x636E;&#x5E93;&#x8BD5;&#x8BD5;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">sh-4.2$ mysql -u <span class="token variable">$MYSQL_USER</span> -p<span class="token variable">$MYSQL_PASSWORD</span> -h <span class="token environment constant">$HOSTNAME</span> <span class="token variable">$MYSQL_DATABASE</span>
</code></pre>
<p>&#x8FD9;&#x70B9;&#x5F88;&#x65B9;&#x4FBF;&#xFF0C;&#x6240;&#x6709;&#x91CD;&#x8981;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5982;MySQL&#x51ED;&#x636E;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x540D;&#x79F0;&#x7B49;&#x90FD;&#x662F;pod&#x6A21;&#x677F;&#x4E2D;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x5728;pod&#x4E2D;&#x4F5C;&#x4E3A;shell&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x3002; &#x6211;&#x4EEC;&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">mysql<span class="token operator">&gt;</span> show databases<span class="token punctuation">;</span>
+--------------------+
<span class="token operator">|</span> Database           <span class="token operator">|</span>
+--------------------+
<span class="token operator">|</span> information_schema <span class="token operator">|</span>
<span class="token operator">|</span> sampledb           <span class="token operator">|</span>
+--------------------+
<span class="token number">2</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token punctuation">\</span>u sampledb
Database changed
mysql<span class="token operator">&gt;</span> CREATE TABLE IF NOT EXISTS equipment <span class="token punctuation">(</span>
    -<span class="token operator">&gt;</span>     equip_id int<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> NOT NULL AUTO_INCREMENT,
    -<span class="token operator">&gt;</span>     <span class="token builtin class-name">type</span> varchar<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> DEFAULT NULL,
    -<span class="token operator">&gt;</span>     install_date DATE DEFAULT NULL,
    -<span class="token operator">&gt;</span>     color varchar<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> DEFAULT NULL,
    -<span class="token operator">&gt;</span>     working bool DEFAULT NULL,
    -<span class="token operator">&gt;</span>     location varchar<span class="token punctuation">(</span><span class="token number">250</span><span class="token punctuation">)</span> DEFAULT NULL,
    -<span class="token operator">&gt;</span>     PRIMARY KEY<span class="token punctuation">(</span>equip_id<span class="token punctuation">)</span>
    -<span class="token operator">&gt;</span>     <span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.13</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> INSERT INTO equipment <span class="token punctuation">(</span>type, install_date, color, working, location<span class="token punctuation">)</span>
    -<span class="token operator">&gt;</span> VALUES
    -<span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token string">&quot;Slide&quot;</span>, Now<span class="token punctuation">(</span><span class="token punctuation">)</span>, <span class="token string">&quot;blue&quot;</span>, <span class="token number">1</span>, <span class="token string">&quot;Southwest Corner&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK, <span class="token number">1</span> row affected, <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> SELECT * FROM equipment<span class="token punctuation">;</span>
+----------+-------+--------------+-------+---------+------------------+
<span class="token operator">|</span> equip_id <span class="token operator">|</span> <span class="token builtin class-name">type</span>  <span class="token operator">|</span> install_date <span class="token operator">|</span> color <span class="token operator">|</span> working <span class="token operator">|</span> location         <span class="token operator">|</span>
+----------+-------+--------------+-------+---------+------------------+
<span class="token operator">|</span>        <span class="token number">1</span> <span class="token operator">|</span> Slide <span class="token operator">|</span> <span class="token number">2017</span>-03-24   <span class="token operator">|</span> blue  <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span> Southwest Corner <span class="token operator">|</span>
+----------+-------+--------------+-------+---------+------------------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>&#x5F88;&#x597D;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x8FD0;&#x884C;&#x6B63;&#x5E38;&#x3002;</p>
<p>&#x4F60;&#x60F3;&#x770B;&#x4E0B;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5728;&#x54EA;&#x91CC;&#x5417;&#xFF1F;&#x5F88;&#x7B80;&#x5355;&#xFF01;&#x67E5;&#x770B;&#x521A;&#x4F7F;&#x7528;&#x6A21;&#x677F;&#x521B;&#x5EFA;&#x7684;mysql volume&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># oc get pvc/mysql</span>
NAME      STATUS    VOLUME                                     CAPACITY   ACCESSMODES   AGE
mysql     Bound     pvc-a678b583-1082-11e7-afae-000c2949cce7   1Gi        RWO           11m
<span class="token comment"># oc describe pv/pvc-a678b583-1082-11e7-afae-000c2949cce7</span>
Name:        pvc-a678b583-1082-11e7-afae-000c2949cce7
Labels:        
StorageClass:    container-ready-storage
Status:        Bound
Claim:        crs-storage/mysql
Reclaim Policy:    Delete
Access Modes:    RWO
Capacity:    1Gi
Message:
Source:
    Type:        Glusterfs <span class="token punctuation">(</span>a Glusterfs <span class="token function">mount</span> on the <span class="token function">host</span> that shares a pod&apos;s lifetime<span class="token punctuation">)</span>
    EndpointsName:    gluster-dynamic-mysql
    Path:        vol_6299fc74eee513119dafd43f8a438db1
    ReadOnly:        <span class="token boolean">false</span>
</code></pre>
<p>GlusterFS&#x7684;volume&#x540D;&#x5B57;&#x662F;vol_6299fc74eee513119dafd43f8a438db1&#x3002;&#x56DE;&#x5230;&#x4F60;&#x7684;GlusterFS&#x865A;&#x62DF;&#x673A;&#x4E2D;&#xFF0C;&#x8F93;&#x5165;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># gluster volume info vol_6299fc74eee513119dafd43f8a438db</span>

Volume Name: vol_6299fc74eee513119dafd43f8a438db1
Type: Replicate
Volume ID: 4115918f-28f7-4d4a-b3f5-4b9afe5b391f
Status: Started
Snapshot Count: <span class="token number">0</span>
Number of Bricks: <span class="token number">1</span> x <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">3</span>
Transport-type: tcp
Bricks:
Brick1: <span class="token number">172.16</span>.128.7:/var/lib/heketi/mounts/vg_67314f879686de975f9b8936ae43c5c5/brick_f264a47aa32be5d595f83477572becf8/brick
Brick2: <span class="token number">172.16</span>.128.8:/var/lib/heketi/mounts/vg_147b43f6f6903be8b23209903b7172ae/brick_f5731fe7175cbe6e6567e013c2591343/brick
Brick3: <span class="token number">172.16</span>.128.9:/var/lib/heketi/mounts/vg_72c0f520b0c57d807be21e9c90312f85/brick_ac6add804a6a467cd81cd1404841bbf1/brick
Options Reconfigured:
transport.address-family: inet
nfs.disable: on
</code></pre>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6570;&#x636E;&#x662F;&#x5982;&#x4F55;&#x88AB;&#x590D;&#x5236;&#x5230;3&#x4E2A;GlusterFS&#x5757;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x4ECE;&#x4E2D;&#x6311;&#x4E00;&#x4E2A;&#xFF08;&#x6700;&#x597D;&#x6311;&#x9009;&#x4F60;&#x521A;&#x767B;&#x9646;&#x7684;&#x90A3;&#x53F0;&#x865A;&#x62DF;&#x673A;&#x5E76;&#x67E5;&#x770B;&#x76EE;&#x5F55;&#xFF09;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># ll /var/lib/heketi/mounts/vg_67314f879686de975f9b8936ae43c5c5/brick_f264a47aa32be5d595f83477572becf8/brick</span>
total <span class="token number">180300</span>
-rw-r-----. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>       <span class="token number">56</span> Mar <span class="token number">24</span> <span class="token number">12</span>:11 auto.cnf
-rw-------. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>     <span class="token number">1676</span> Mar <span class="token number">24</span> <span class="token number">12</span>:11 ca-key.pem
-rw-r--r--. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>     <span class="token number">1075</span> Mar <span class="token number">24</span> <span class="token number">12</span>:11 ca.pem
-rw-r--r--. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>     <span class="token number">1079</span> Mar <span class="token number">24</span> <span class="token number">12</span>:12 client-cert.pem
-rw-------. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>     <span class="token number">1680</span> Mar <span class="token number">24</span> <span class="token number">12</span>:12 client-key.pem
-rw-r-----. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>      <span class="token number">352</span> Mar <span class="token number">24</span> <span class="token number">12</span>:12 ib_buffer_pool
-rw-r-----. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span> <span class="token number">12582912</span> Mar <span class="token number">24</span> <span class="token number">12</span>:20 ibdata1
-rw-r-----. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span> <span class="token number">79691776</span> Mar <span class="token number">24</span> <span class="token number">12</span>:20 ib_logfile0
-rw-r-----. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span> <span class="token number">79691776</span> Mar <span class="token number">24</span> <span class="token number">12</span>:11 ib_logfile1
-rw-r-----. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span> <span class="token number">12582912</span> Mar <span class="token number">24</span> <span class="token number">12</span>:12 ibtmp1
drwxr-s---. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>     <span class="token number">8192</span> Mar <span class="token number">24</span> <span class="token number">12</span>:12 mysql
-rw-r-----. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>        <span class="token number">2</span> Mar <span class="token number">24</span> <span class="token number">12</span>:12 mysql-1-h4afb.pid
drwxr-s---. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>     <span class="token number">8192</span> Mar <span class="token number">24</span> <span class="token number">12</span>:12 performance_schema
-rw-------. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>     <span class="token number">1676</span> Mar <span class="token number">24</span> <span class="token number">12</span>:12 private_key.pem
-rw-r--r--. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>      <span class="token number">452</span> Mar <span class="token number">24</span> <span class="token number">12</span>:12 public_key.pem
drwxr-s---. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>       <span class="token number">62</span> Mar <span class="token number">24</span> <span class="token number">12</span>:20 sampledb
-rw-r--r--. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>     <span class="token number">1079</span> Mar <span class="token number">24</span> <span class="token number">12</span>:11 server-cert.pem
-rw-------. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>     <span class="token number">1676</span> Mar <span class="token number">24</span> <span class="token number">12</span>:11 server-key.pem
drwxr-s---. <span class="token number">2</span> <span class="token number">1000070000</span> <span class="token number">2001</span>     <span class="token number">8192</span> Mar <span class="token number">24</span> <span class="token number">12</span>:12 sys
</code></pre>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x770B;&#x5230;MySQL&#x6570;&#x636E;&#x5E93;&#x76EE;&#x5F55;&#x3002; &#x5B83;&#x4F7F;&#x7528;GlusterFS&#x4F5C;&#x4E3A;&#x540E;&#x7AEF;&#x5B58;&#x50A8;&#xFF0C;&#x5E76;&#x4F5C;&#x4E3A;&#x7ED1;&#x5B9A;&#x6302;&#x8F7D;&#x7ED9;MySQL&#x5BB9;&#x5668;&#x4F7F;&#x7528;&#x3002; &#x5982;&#x679C;&#x4F60;&#x68C0;&#x67E5;OpenShift VM&#x4E0A;&#x7684;mount&#x8868;&#xFF0C;&#x4F60;&#x5C06;&#x4F1A;&#x770B;&#x5230;GlusterFS&#x7684;mount&#x3002;</p>
<h3 id="&#x603B;&#x7ED3;">&#x603B;&#x7ED3;</h3>
<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x662F;&#x5728;OpenShift&#x4E4B;&#x5916;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x4F46;&#x529F;&#x80FD;&#x5F3A;&#x5927;&#x7684;GlusterFS&#x5B58;&#x50A8;&#x6C60;&#x3002; &#x8BE5;&#x6C60;&#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x4E8E;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6269;&#x5C55;&#x548C;&#x6536;&#x7F29;&#x3002; &#x8BE5;&#x6C60;&#x7684;&#x6574;&#x4E2A;&#x751F;&#x547D;&#x5468;&#x671F;&#x7531;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x79F0;&#x4E3A;heketi&#x7684;&#x524D;&#x7AEF;&#x7BA1;&#x7406;&#xFF0C;&#x4F60;&#x53EA;&#x9700;&#x8981;&#x5728;&#x90E8;&#x7F72;&#x589E;&#x957F;&#x65F6;&#x8FDB;&#x884C;&#x624B;&#x52A8;&#x5E72;&#x9884;&#x3002; &#x5BF9;&#x4E8E;&#x65E5;&#x5E38;&#x914D;&#x7F6E;&#x64CD;&#x4F5C;&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x7684;API&#x4E0E;OpenShifts&#x52A8;&#x6001;&#x914D;&#x7F6E;&#x5668;&#x4EA4;&#x4E92;&#xFF0C;&#x65E0;&#x9700;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x76F4;&#x63A5;&#x4E0E;&#x57FA;&#x7840;&#x67B6;&#x6784;&#x56E2;&#x961F;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#x3002;</p>
<p>o&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x5982;&#x4F55;&#x5C06;&#x5B58;&#x50A8;&#x5E26;&#x5165;DevOps&#x4E16;&#x754C; - &#x65E0;&#x75DB;&#x82E6;&#xFF0C;&#x5E76;&#x5728;OpenShift PaaS&#x7CFB;&#x7EDF;&#x7684;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5DE5;&#x5177;&#x4E2D;&#x76F4;&#x63A5;&#x63D0;&#x4F9B;&#x3002;</p>
<p>GlusterFS&#x548C;OpenShift&#x53EF;&#x8DE8;&#x8D8A;&#x6240;&#x6709;&#x73AF;&#x5883;&#xFF1A;&#x88F8;&#x673A;&#xFF0C;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x79C1;&#x6709;&#x548C;&#x516C;&#x5171;&#x4E91;&#xFF08;Azure&#xFF0C;Google Cloud&#xFF0C;AWS ...&#xFF09;&#xFF0C;&#x786E;&#x4FDD;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x79FB;&#x690D;&#x6027;&#xFF0C;&#x5E76;&#x907F;&#x514D;&#x4E91;&#x4F9B;&#x5E94;&#x5546;&#x9501;&#x5B9A;&#x3002;</p>
<p>&#x795D;&#x4F60;&#x6109;&#x5FEB;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x4F7F;&#x7528;GlusterFS&#xFF01;</p>
<p>(c) 2017 Keith Tenzer</p>
<p>&#x539F;&#x6587;&#x94FE;&#x63A5;&#xFF1A;<a href="https://keithtenzer.com/2017/03/24/storage-for-containers-using-gluster-part-ii/" target="_blank">https://keithtenzer.com/2017/03/24/storage-for-containers-using-gluster-part-ii/</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="using-heketi-gluster-for-persistent-storage.html" class="navigation navigation-prev " aria-label="Previous page: 使用 Heketi 作为 Kubernetes 的持久存储 GlusterFS 的 external provisioner">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="glusterd-2.0.html" class="navigation navigation-next " aria-label="Next page: GlusterD-2.0">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"在 OpenShift 中使用 GlusterFS 做持久化存储","level":"6.6.1.3","depth":3,"next":{"title":"GlusterD-2.0","level":"6.6.2","depth":2,"path":"practice/glusterd-2.0.md","ref":"practice/glusterd-2.0.md","articles":[]},"previous":{"title":"使用 Heketi 作为 Kubernetes 的持久存储 GlusterFS 的 external provisioner","level":"6.6.1.2","depth":3,"path":"practice/using-heketi-gluster-for-persistent-storage.md","ref":"practice/using-heketi-gluster-for-persistent-storage.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","-highlight","-livereload","prism"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-solarizedlight.css"]},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"rootsongjc-kubernetes-handbook ","language":"zh-hans","links":{"sidebar":{"Home":"https://docs.khs1994.com"}},"gitbook":"*"},"file":{"path":"practice/storage-for-containers-using-glusterfs-with-openshift.md","mtime":"2021-04-27T00:37:27.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-04-27T00:40:42.877Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

